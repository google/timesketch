(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(t,e,i){t.exports=i("56d7")},"05a2":function(t,e,i){"use strict";i.r(e),e["default"]={name:"filterChip",filter:function(t){return"label"===t.type?"__ts_star"===t.value?"Starred":"__ts_comment"===t.value?"Commented":t.value:t.field+":"+t.value}}},"09ff":function(t,e,i){"use strict";i.r(e);i("6b54");e["default"]={name:"formatTimestamp",filter:function(t){var e=parseInt(t).toString().length;return 13===e?t:(15===e||16===e?t/=1e3:10===e&&(t*=1e6),parseInt(t))}}},"16f1":function(t,e,i){"use strict";i.r(e);i("a481");e["default"]={name:"formatLabelText",filter:function(t){return t.replace("__ts_","")}}},"2d27":function(t,e,i){"use strict";i.r(e);i("7f7f"),i("ac6a");var s=i("2b0e"),n=i("75a6");n.keys().forEach((function(t){var e=n(t),i=e.default.name;s["default"].component(i,e.default||e)}))},"2d9e":function(t,e,i){"use strict";i("71d3")},"35fd":function(t,e,i){"use strict";i("97be")},3884:function(t,e,i){"use strict";i("c7b3")},"3d1d":function(t,e,i){"use strict";i.r(e),e["default"]={name:"compactBytes",filter:function(t){t||(t=0);var e=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.min(Math.floor(Math.log(t)/Math.log(1e3)),e.length-1),s=1*(t/Math.pow(1e3,i)).toFixed(2);return s+e[i]}}},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",{attrs:{id:"app"}},[i("v-app-bar",{attrs:{app:"","clipped-right":"",flat:"",color:t.$vuetify.theme.dark?"":"white"},scopedSlots:t._u([{key:"extension",fn:function(){return[i("v-tabs",{staticClass:"ml-2"},[i("v-tab",{attrs:{to:{name:"Overview"},"exact-path":""}},[i("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-cube-outline")]),t._v(" Overview")],1),i("v-tab",{attrs:{to:{name:"Explore"}}},[i("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-magnify")]),t._v(" Explore ")],1),i("v-tab",{attrs:{disabled:""}},[i("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-lan")]),t._v(" Graph ")],1),i("v-tab",{attrs:{disabled:""}},[i("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-auto-fix")]),t._v("Automation")],1),i("v-tab",{attrs:{disabled:""}},[i("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-head-lightbulb")]),t._v("Intelligence")],1)],1)]},proxy:!0}])},[i("v-img",{attrs:{src:"/dist/timesketch-color.png","max-height":"30","max-width":"30",contain:""}}),i("v-toolbar-title",{staticClass:"ml-3"},[t._v(" timesketch ")]),t.sketch.name?i("span",{staticClass:"ml-6",staticStyle:{"margin-top":"5px"}},[t._v("\n      "+t._s(t.sketch.name)+"\n    ")]):t._e(),i("v-spacer"),i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:""},on:{click:t.toggleTheme}},"v-btn",n,!1),s),[i("v-icon",[t._v("mdi-brightness-6")])],1)]}}])},[i("span",[t._v("Switch between light and dark theme")])]),i("v-avatar",{staticClass:"ml-3",attrs:{color:"orange",size:"32"}},[i("span",{staticClass:"white--text"},[t._v("jb")])])],1),i("v-main",{staticClass:"mx-4"},[i("router-view")],1)],1)},r=[],a=(i("6b54"),{name:"app",data:function(){return{drawer:!0}},computed:{sketch:function(){return this.$store.state.sketch}},methods:{toggleTheme:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,localStorage.setItem("isDarkTheme",this.$vuetify.theme.dark.toString())}},mounted:function(){var t=localStorage.getItem("isDarkTheme");t&&(this.$vuetify.theme.dark="true"==t)}}),o=a,c=(i("60bc"),i("5c64"),i("2877")),l=Object(c["a"])(o,n,r,!1,null,null,null),u=l.exports,h=i("8c4f"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-sheet",{attrs:{outlined:"",rounded:""}},[i("ts-sketch-list",{attrs:{scope:"recent"}})],1)],1),i("v-col",{attrs:{cols:"12"}},[i("v-sheet",{attrs:{outlined:"",rounded:""}},[i("ts-sketch-list",{attrs:{scope:"user"}})],1)],1)],1)],1)},m=[],v=(i("386d"),i("7f7f"),i("6762"),i("2fdb"),{components:{},data:function(){return{showSketchCreateModal:!1,allSketches:[],mySketches:[],myArchivedSketches:[],sharedSketches:[],loading:!0,isFullPage:!0,loadingComponent:null,searchQuery:"",newSearchQuery:""}},computed:{filteredList:function(){var t=this;return this.allSketches.filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}))}},methods:{loadingOpen:function(){this.loading=!0,this.loadingComponent=this.$buefy.loading.open({container:this.isFullPage?null:this.$refs.element.$el})},loadingClose:function(){this.loading=!1,this.loadingComponent.close()},search:function(){this.newSearchQuery=this.searchQuery}},created:function(){this.$store.dispatch("resetState"),document.title="Timesketch"}}),f=v,p=Object(c["a"])(f,d,m,!1,null,null,null),g=p.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"mt-4",attrs:{fluid:""}},[i("v-navigation-drawer",{staticStyle:{"box-shadow":"0 10px 15px -3px #888"},attrs:{fixed:"",right:"",width:"600"},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[t._v(t._s(t.selectedEvents.length)+" events selected")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:function(e){t.selectedEvents=[]}}},[i("v-icon",[t._v("mdi-close")])],1)],1)]},proxy:!0}]),model:{value:t.selectedEvents.length,callback:function(e){t.$set(t.selectedEvents,"length",e)},expression:"selectedEvents.length"}},[i("v-container",[i("v-list",t._l(t.selectedEvents,(function(e,s){return i("v-list-item",{key:s},[i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e._source.message))])],1)],1)})),1)],1)],1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-card",{staticClass:"pa-md-2",attrs:{outlined:""}},[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-card",{staticClass:"d-flex align-start",attrs:{flat:""}},[i("v-sheet",{staticClass:"mt-1"},[i("ts-search-history-buttons",{on:{toggleSearchHistory:function(e){return t.toggleSearchHistory()}}}),i("v-menu",{staticStyle:{overflow:"visible"},attrs:{"offset-y":"","close-on-content-click":!1,"close-on-click":!0,"content-class":"menu-with-gap","allow-overflow":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({attrs:{small:"",depressed:""}},"v-btn",n,!1),s),[i("v-icon",{attrs:{left:""}},[t._v(" mdi-filter-variant-plus ")]),t._v("\n                      Add filter\n                    ")],1)]}}]),model:{value:t.timeFilterMenu,callback:function(e){t.timeFilterMenu=e},expression:"timeFilterMenu"}},[i("ts-filter-menu",{attrs:{app:""},on:{cancel:function(e){t.timeFilterMenu=!1},addChip:t.addChip}})],1)],1),i("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),i("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1,"close-on-click":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({ref:"searchInput",attrs:{"hide-details":"",label:"Search",placeholder:"Search","single-line":"",dense:"",filled:"",flat:"",solo:"","append-icon":"mdi-magnify",id:"tsSearchInput"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)},click:function(e){t.showSearchDropdown=!0}},model:{value:t.currentQueryString,callback:function(e){t.currentQueryString=e},expression:"currentQueryString"}},"v-text-field",n,!1),s))]}}]),model:{value:t.showSearchDropdown,callback:function(e){t.showSearchDropdown=e},expression:"showSearchDropdown"}},[i("ts-search-dropdown",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],attrs:{"selected-labels":t.selectedLabels,"query-string":t.currentQueryString},on:{setActiveView:t.searchView,addChip:t.addChip,updateLabelChips:function(e){return t.updateLabelChips()},"close-on-click":function(e){t.showSearchDropdown=!1},"node-click":t.jumpInHistory,setQueryAndFilter:t.setQueryAndFilter}})],1)],1)],1)],1),i("v-divider",{staticClass:"mt-2 mb-3"}),t.timeFilterChips.length?i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[i("v-chip-group",[t._l(t.timeFilterChips,(function(e,s){return i("span",{key:s+e.value},[i("v-menu",{attrs:{"offset-y":"","content-class":"menu-with-gap"},scopedSlots:t._u([{key:"activator",fn:function(s){var n=s.on;return[i("v-chip",t._g({},n),[i("v-icon",{attrs:{left:"",small:""}},[t._v(" mdi-clock-outline ")]),i("span",{style:[e.active?"":{"text-decoration":"line-through",opacity:"50%"}]},[i("span",[t._v(t._s(e.value.split(",")[0]))]),"datetime_range"===e.type&&e.value.split(",")[0]!==e.value.split(",")[1]?i("span",[t._v("\n                          â†’ "+t._s(e.value.split(",")[1]))]):t._e()])],1)]}}],null,!0)},[i("v-card",[i("v-list",[i("v-list-item",[i("v-list-item-action",[i("v-icon",[t._v("mdi-square-edit-outline")])],1),i("v-list-item-subtitle",[t._v("Edit filter")])],1),i("v-list-item",{on:{click:function(i){return t.toggleChip(e)}}},[i("v-list-item-action",[e.active?i("v-icon",[t._v("mdi-eye-off")]):i("v-icon",[t._v("mdi-eye")])],1),i("v-list-item-subtitle",[e.active?i("span",[t._v("Temporarily disable")]):i("span",[t._v("Re-enable")])])],1),i("v-list-item",{on:{click:function(i){return t.removeChip(e)}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-delete")])],1),i("v-list-item-subtitle",[t._v("Remove filter")])],1)],1)],1)],1),s+1<t.timeFilterChips.length?i("v-btn",{staticClass:"mr-2",staticStyle:{"margin-top":"2px"},attrs:{icon:"",small:""}},[t._v("OR")]):t._e()],1)})),i("v-btn",{staticStyle:{"margin-top":"2px"},attrs:{icon:""},on:{click:function(e){t.timeFilterMenu=!0}}},[i("v-icon",[t._v("mdi-plus")])],1)],2)],1)],1):t._e(),t.filterChips.length?i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[i("v-chip-group",[t._l(t.filterChips,(function(e,s){return i("span",{key:s+e.value},[i("v-chip",[t._v("\n                  "+t._s(t._f("formatLabelText")(e.value))+"\n                ")]),s+1<t.timeFilterChips.length?i("v-btn",{staticClass:"mr-2",staticStyle:{"margin-top":"2px"},attrs:{icon:"",small:""}},[t._v("AND")]):t._e()],1)})),i("v-btn",{staticStyle:{"margin-top":"2px"},attrs:{icon:""},on:{click:function(e){t.timeFilterMenu=!0}}},[i("v-icon",[t._v("mdi-plus")])],1)],2)],1)],1):t._e(),i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[i("ts-timeline-picker",{attrs:{"current-query-filter":t.currentQueryFilter,"count-per-index":t.eventList.meta.count_per_index,"count-per-timeline":t.eventList.meta.count_per_timeline},on:{updateSelectedTimelines:function(e){return t.updateSelectedTimelines(e)}}})],1)],1)],1)],1)],1),i("v-row",[i("v-col",{directives:[{name:"show",rawName:"v-show",value:t.showSearchHistory,expression:"showSearchHistory"}],attrs:{cols:"12"}},[i("v-card",{attrs:{outlined:""}},[i("v-toolbar",{attrs:{elevation:"0",dense:""}},[i("v-toolbar-title",[t._v("Search history")]),i("v-spacer"),i("v-slider",{staticClass:"mt-6",attrs:{"thumb-label":"",ticks:"","append-icon":"mdi-magnify-plus-outline","prepend-icon":"mdi-magnify-minus-outline",min:"0.1",max:"1",step:"0.1"},scopedSlots:t._u([{key:"thumb-label",fn:function(e){var i=e.value;return[t._v(" "+t._s(100*i)+"% ")]}}]),model:{value:t.zoomLevel,callback:function(e){t.zoomLevel=e},expression:"zoomLevel"}}),i("v-btn",{staticClass:"ml-4",attrs:{icon:""},on:{click:function(e){t.showSearchHistory=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll"}],staticClass:"pa-md-4 no-scrollbars",staticStyle:{overflow:"scroll","white-space":"nowrap","max-height":"500px","min-height":"500px"}},[i("ts-search-history-tree",{staticStyle:{"transform-origin":"top left"},style:{transform:"scale("+t.zoomLevel+")"},attrs:{"show-history":t.showSearchHistory},on:{"node-click":t.jumpInHistory}})],1)],1)],1)],1),i("v-row",[(t.eventList.objects.length||t.searchInProgress)&&this.currentQueryFilter.indices.length?t._e():i("v-col",{attrs:{cols:"12"}},[i("v-card",{staticClass:"pa-4",attrs:{outlined:""}},[i("p",[t._v("\n          Your search "),t.currentQueryString?i("span",[t._v('"'+t._s(t.currentQueryString)+'"')]):t._e(),t._v(" did not match any events.\n        ")]),i("p",[t._v("Suggestions:")]),i("li",[t._v("Try different keywords.")]),i("li",[t._v("Try more general keywords.")]),i("li",[t._v("Try fewer keywords.")])])],1),t.eventList.objects.length||t.searchInProgress&&this.currentQueryFilter.indices.length?i("v-col",{attrs:{cols:"12"}},[i("v-card",{attrs:{outlined:""}},[i("v-toolbar",{attrs:{flat:""}},[i("v-card-text",[t._v(" "+t._s(t.fromEvent)+"-"+t._s(t.toEvent)+" of "+t._s(t.totalHits)+" events ("+t._s(t.totalTime)+"s) ")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:function(e){t.showHistogram=!t.showHistogram}}},[i("v-icon",[t._v("mdi-chart-bar")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-content-save-outline")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-view-column-outline")])],1),i("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),s),[i("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,3221905750)},[i("v-card",{staticClass:"mx-auto",attrs:{outlined:"","max-width":"475"}},[i("v-list",{attrs:{subheader:"","two-line":"",flat:"",dense:""}},[i("v-subheader",[t._v("Density")]),i("v-list-item-group",[i("v-list-item",{attrs:{ripple:!1}},[[i("v-list-item-action",[i("v-radio-group",{model:{value:t.displayOptions.isCompact,callback:function(e){t.$set(t.displayOptions,"isCompact",e)},expression:"displayOptions.isCompact"}},[i("v-radio",{attrs:{value:!1}})],1)],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Comfortable")]),i("v-list-item-subtitle",[t._v("More space between rows")])],1)]],2),i("v-list-item",{attrs:{ripple:!1}},[[i("v-list-item-action",[i("v-radio-group",{model:{value:t.displayOptions.isCompact,callback:function(e){t.$set(t.displayOptions,"isCompact",e)},expression:"displayOptions.isCompact"}},[i("v-radio",{attrs:{value:!0}})],1)],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Compact")]),i("v-list-item-subtitle",[t._v("Less space between rows")])],1)]],2)],1),i("v-divider"),i("v-list",{attrs:{subheader:"","two-line":"",flat:""}},[i("v-subheader",[t._v("Misc")]),i("v-list-item-group",[i("v-list-item",{attrs:{ripple:!1}},[i("v-list-item-action",[i("v-switch",{attrs:{dense:"",color:""},model:{value:t.displayOptions.showTags,callback:function(e){t.$set(t.displayOptions,"showTags",e)},expression:"displayOptions.showTags"}})],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Tags")]),i("v-list-item-subtitle",[t._v("Show tags")])],1)],1)],1),i("v-list-item-group",[i("v-list-item",{attrs:{ripple:!1}},[i("v-list-item-action",[i("v-switch",{attrs:{dense:""},model:{value:t.displayOptions.showEmojis,callback:function(e){t.$set(t.displayOptions,"showEmojis",e)},expression:"displayOptions.showEmojis"}})],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Emojis")]),i("v-list-item-subtitle",[t._v("Show emojis")])],1)],1)],1)],1)],1)],1)],1)],1),i("v-sheet",{staticClass:"pa-4"},[t.showHistogram?i("v-card",{staticClass:"pa-2",attrs:{outlined:""}},[i("ts-bar-chart",{attrs:{"chart-data":t.eventList.meta.count_over_time},on:{addChip:function(e){return t.addChipFromHistogram(e)}}})],1):t._e()],1),i("v-data-table",{attrs:{headers:t.headers,items:t.eventList.objects,"footer-props":{"items-per-page-options":[40,80,100,200,500]},loading:t.searchInProgress,options:t.tableOptions,"item-key":"_id","loading-text":"Searching... Please wait","show-select":"",expanded:t.expandedRows,dense:t.displayOptions.isCompact},scopedSlots:t._u([{key:"expanded-item",fn:function(e){var s=e.headers,n=e.item;return[i("td",{attrs:{colspan:s.length}},[n.showDetails?i("v-container",{staticClass:"mt-4",attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{cols:"8"}},[i("v-card",{attrs:{outlined:""}},[i("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("Attribute")]),i("th",{staticClass:"text-left"},[t._v("Value")])])]),i("tbody",t._l(n._source,(function(e,s){return i("tr",{key:s},[i("td",[t._v(t._s(s))]),i("td",[t._v(t._s(e))])])})),0)]},proxy:!0}],null,!0)})],1)],1),i("v-col",{attrs:{cols:"4"}},[i("v-list",{attrs:{"three-line":""}},[i("v-list-item",[i("v-list-item-avatar",[i("v-avatar",{staticClass:"ml-3",attrs:{color:"orange",size:"32"}},[i("span",{staticClass:"white--text"},[t._v("jb")])])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Jane Doe")]),i("p",{staticClass:"body-2"},[t._v("\n                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris elit mauris, lobortis ut\n                            condimentum quis, imperdiet a eros. Maecenas tincidunt diam sit amet orci aliquam\n                            suscipit. Praesent condimentum vitae ante in rutrum. Cras ac velit lacus. Vestibulum at\n                            est massa. Nam vulputate justo turpis, at efficitur felis pulvinar id.\n                          ")])],1)],1),i("v-list-item",[i("v-list-item-avatar",[i("v-avatar",{staticClass:"ml-3",attrs:{color:"orange",size:"32"}},[i("span",{staticClass:"white--text"},[t._v("jb")])])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("John Doe")]),i("p",{staticClass:"body-2"},[t._v("\n                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris elit mauris, lobortis ut\n                            condimentum quis, imperdiet a eros.\n                          ")])],1)],1)],1)],1)],1)],1):t._e(),n.showDetails&&n.deltaDays?i("v-divider"):t._e(),n.deltaDays>0?i("div",{staticClass:"ml-16"},[i("div",{staticClass:"ts-time-bubble-vertical-line ts-time-bubble-vertical-line-color",style:t.getTimeBubbleColor(n)}),i("div",{staticClass:"ts-time-bubble ts-time-bubble-color",style:t.getTimeBubbleColor(n)},[i("h5",[i("b",[t._v(t._s(t._f("compactNumber")(n.deltaDays)))]),i("br"),t._v("days\n                  ")])]),i("div",{staticClass:"ts-time-bubble-vertical-line ts-time-bubble-vertical-line-color",style:t.getTimeBubbleColor(n)})]):t._e()],1)]}},{key:"item._source.timestamp",fn:function(e){var s=e.item;return[i("div",{staticClass:"datetime-table-cell",style:t.getTimelineColor(s)},[t._v("\n              "+t._s(t._f("toISO8601")(t._f("formatTimestamp")(s._source.timestamp)))+"\n            ")])]}},{key:"item.actions",fn:function(e){e.item;return[i("v-btn",{attrs:{small:"",icon:""}},[i("v-icon",[t._v("mdi-star-outline")])],1),i("v-btn",{attrs:{small:"",icon:""}},[i("v-icon",[t._v("mdi-tag-plus-outline")])],1)]}},{key:"item._source.message",fn:function(e){var s=e.item;return[i("span",{staticClass:"ts-event-field-container"},[i("span",{staticClass:"ts-event-field-ellipsis"},[t.displayOptions.showTags?i("span",t._l(s._source.tag,(function(e){return i("v-chip",{key:e,staticClass:"mr-2",attrs:{small:"",label:"",outlined:""}},[t._v(t._s(e))])})),1):t._e(),t.displayOptions.showEmojis?i("span",t._l(s._source.__ts_emojis,(function(e){return i("span",{key:e,staticClass:"mr-2",attrs:{title:t.meta.emojis[e]},domProps:{innerHTML:t._s(e)}},[t._v(t._s(e)+"\n                  ")])})),0):t._e(),i("span",{on:{click:function(e){return t.toggleDetailedEvent(s)}}},[t._v(t._s(s._source.message))])])])]}},{key:"item.timeline_name",fn:function(e){var s=e.item;return[i("v-chip",{staticStyle:{"margin-top":"1px","margin-bottom":"1px","font-size":"0.9em"},attrs:{label:""}},[t._v(t._s(t.getTimeline(s).name))])]}}],null,!1,3160184368),model:{value:t.selectedEvents,callback:function(e){t.selectedEvents=e},expression:"selectedEvents"}})],1)],1):t._e()],1)],1)},_=[],b=(i("7514"),i("456d"),i("a481"),i("ac6a"),i("20d6"),i("f559"),i("bc3a")),k=i.n(b),S=i("2c4e"),w=k.a.create({baseURL:"/api/v1",headers:{common:{"X-CSRFToken":document.getElementsByTagName("meta")[0]["content"]}}}),T=k.a.create({baseURL:"/api/v1",responseType:"blob",headers:{common:{"X-CSRFToken":document.getElementsByTagName("meta")[0]["content"]}}});w.interceptors.response.use((function(t){return t}),(function(t){return"The CSRF token has expired."===t.response.data.message?S["a"].open({message:t.response.data.message,type:"is-white",position:"is-top",actionText:"Refresh",indefinite:!0,onAction:function(){location.reload()}}):S["a"].open({message:t.response.data.message,type:"is-white",position:"is-top",actionText:"Close",duration:7e3}),Promise.reject(t)}));var C={getSketchList:function(t,e,i){var s={params:{scope:t,page:e,search_query:i}};return w.get("/sketches/",s)},getSketch:function(t){return w.get("/sketches/"+t+"/")},createSketch:function(t){return w.post("/sketches/",t)},deleteSketch:function(t){return w.delete("/sketches/"+t+"/")},archiveSketch:function(t){var e={action:"archive"};return w.post("/sketches/"+t+"/archive/",e)},unArchiveSketch:function(t){var e={action:"unarchive"};return w.post("/sketches/"+t+"/archive/",e)},exportSketch:function(t){var e={action:"export"};return T.post("/sketches/"+t+"/archive/",e)},getSketchAttributes:function(t){return w.get("/sketches/"+t+"/attribute/")},addSketchAttribute:function(t,e,i,s){var n={name:e,values:[i],ontology:s,action:"post"};return w.post("/sketches/"+t+"/attribute/",n)},getSketchTimeline:function(t,e){return w.get("/sketches/"+t+"/timelines/"+e+"/")},getSketchTimelineAnalysis:function(t,e){return w.get("/sketches/"+t+"/timelines/"+e+"/analysis/")},saveSketchTimeline:function(t,e,i,s,n){var r={name:i,description:s,color:n};return w.post("/sketches/"+t+/timelines/+e+"/",r)},saveSketchSummary:function(t,e,i){var s={name:e,description:i};return w.post("/sketches/"+t+"/",s)},deleteSketchTimeline:function(t,e){return w.delete("/sketches/"+t+/timelines/+e+"/")},getEvent:function(t,e,i){var s={params:{searchindex_id:e,event_id:i}};return w.get("/sketches/"+t+"/event/",s)},saveEventAnnotation:function(t,e,i,s,n){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a={annotation:i,annotation_type:e,events:s,current_search_node_id:n.id,remove:r};return w.post("/sketches/"+t+"/event/annotate/",a)},getStoryList:function(t){return w.get("sketches/"+t+"/stories/")},getStory:function(t,e){return w.get("/sketches/"+t+"/stories/"+e+"/")},createStory:function(t,e,i){var s={title:t,content:e};return w.post("/sketches/"+i+/stories/,s)},updateStory:function(t,e,i,s){var n={title:t,content:e};return w.post("/sketches/"+i+/stories/+s+"/",n)},deleteStory:function(t,e){return w.delete("/sketches/"+t+/stories/+e+"/")},getView:function(t,e){return w.get("/sketches/"+t+"/views/"+e+"/")},createView:function(t,e,i,s){var n={name:e,query:i,filter:s,dsl:""};return w.post("/sketches/"+t+/views/,n)},updateView:function(t,e,i,s){var n={query:i,filter:s};return w.post("/sketches/"+t+/views/+e+"/",n)},deleteView:function(t,e){return w.delete("/sketches/"+t+"/views/"+e+"/")},search:function(t,e){return w.post("/sketches/"+t+"/explore/",e)},exportSearchResult:function(t,e){return T.post("/sketches/"+t+"/explore/",e)},getAggregations:function(t){return w.get("/sketches/"+t+"/aggregation/")},getAggregationGroups:function(t){return w.get("/sketches/"+t+"/aggregation/group/")},runAggregator:function(t,e){return w.post("/sketches/"+t+"/aggregation/explore/",e)},runAggregatorGroup:function(t,e){return w.get("/sketches/"+t+"/aggregation/group/"+e+"/")},saveAggregation:function(t,e,i,s){var n={name:i,description:e.description,agg_type:e.name,chart_type:s["supported_charts"],parameters:s};return w.post("/sketches/"+t+"/aggregation/",n)},countSketchEvents:function(t){return w.get("/sketches/"+t+"/count/")},uploadTimeline:function(t,e){return w.post("/upload/",t,e)},getSessions:function(t,e){return w.get("/sketches/"+t+"/explore/sessions/"+e+"/")},getUsers:function(){return w.get("/users/")},getGroups:function(){return w.get("/groups/")},editCollaborators:function(t,e,i,s,n,r){var a={public:e,users:i,groups:s,remove_users:n,remove_groups:r};return w.post("/sketches/"+t+/collaborators/,a)},getAnalyzers:function(t){return w.get("/sketches/"+t+"/analyzer/")},runAnalyzers:function(t,e,i){var s={timeline_ids:e,analyzer_names:i};return w.post("/sketches/"+t+/analyzer/,s)},getAnalyzerSession:function(t,e){return w.get("/sketches/"+t+"/analyzer/sessions/"+e+"/")},getActiveAnalyzerSessions:function(t){return w.get("/sketches/"+t+"/analyzer/sessions/active/")},getLoggedInUser:function(){return w.get("/users/me/")},generateGraphFromPlugin:function(t,e,i,s,n){var r={plugin:e,config:{filter:{indices:i,timelineIds:s}},refresh:n};return s.length&&(r["timeline_ids"]=s),w.post("/sketches/"+t+/graph/,r)},getGraphPluginList:function(){return w.get("/graphs/")},saveGraph:function(t,e,i){var s={name:e,elements:i};return w.post("/sketches/"+t+/graphs/,s)},getSavedGraphList:function(t){return w.get("/sketches/"+t+/graphs/)},getSavedGraph:function(t,e){var i={params:{format:"cytoscape"}};return w.get("/sketches/"+t+/graphs/+e+"/",i)},getSearchHistory:function(t){return w.get("/sketches/"+t+/searchhistory/)},getSearchHistoryTree:function(t){return w.get("/sketches/"+t+/searchhistorytree/)},getSigmaList:function(){return w.get("/sigma/")},getSigmaResource:function(t){return w.get("/sigma/rule/"+t+"/")},getSigmaByText:function(t){var e={content:t};return w.post("/sigma/text/",e)}},x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return Object.keys(t.treeData).length>0?i("ul",{staticClass:"tree"},[i("tree-node",{attrs:{node:t.treeData,"handle-click":t.handleClick,"selected-node":t.selectedNode}})],1):t._e()},F=[],E=i("7618"),$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("span",{class:[{active:t.isSelected},{star:t.hasStar&&!t.isSelected},{dimmed:0===t.count&&!t.isSelected}],staticStyle:{"min-width":"205px"},attrs:{id:t.node.id},on:{click:function(e){return t.handleClick(t.node)}}},[t.hasStar?i("i",{staticClass:"fas fa-star",staticStyle:{float:"left",color:"#ffd700","-webkit-text-stroke-width":"1px","-webkit-text-stroke-color":"#777777","margin-right":"10px","margin-top":"3px"}}):t._e(),t.hasStar?i("v-icon",{staticStyle:{float:"left",color:"#333","margin-right":"10px"}},[t._v(" mdi-star ")]):t._e(),t.hasComment?i("v-icon",{staticStyle:{float:"left","margin-right":"10px"}},[t._v("mdi-comment")]):t._e(),t.hasLabel?i("v-icon",{staticClass:"fas fa-tag",staticStyle:{float:"left","margin-right":"10px"}},[t._v("mdi-label")]):t._e(),i("div",{staticClass:"query-string",class:[{"query-string-active":t.isSelected}],staticStyle:{float:"left"}},[t._v("\n      "+t._s(t.node.query_string)+"\n    ")]),i("div",{staticClass:"tag is-light",staticStyle:{"margin-left":"10px","margin-right":"-5px",float:"right"}},[t._v("\n      "+t._s(t._f("compactNumber")(t.count))+"\n    ")])],1),t.node.children&&t.node.children.length?i("ul",t._l(t.node.children,(function(e){return i("node",{key:e.id,attrs:{node:e,"handle-click":t.handleClick,"selected-node":t.selectedNode}})})),1):t._e()])},D=[],L={name:"node",props:{node:Object,handleClick:Function,selectedNode:Object},computed:{hasStar:function(){return this.node.labels.includes("__ts_star")},hasLabel:function(){return this.node.labels.includes("__ts_label")},hasComment:function(){return this.node.labels.includes("__ts_comment")},isSelected:function(){return this.selectedNode.id===this.node.id},count:function(){return this.node.query_result_count||0}}},O=L,Q=(i("3884"),Object(c["a"])(O,$,D,!1,null,"1623aa42",null)),N=Q.exports;function j(t,e,i){if(t.hasOwnProperty(e)&&!0===i(e,t[e]))return t;for(var s=0;s<Object.keys(t).length;s++){var n=t[Object.keys(t)[s]];if("object"===Object(E["a"])(n)&&null!=n){var r=j(n,e,i);if(null!=r)return r}}return null}var I={components:{TreeNode:N},data:function(){return{treeData:{},selectedNode:null,initialNode:null}},computed:{sketch:function(){return this.$store.state.sketch}},methods:{handleClick:function(t){this.$emit("node-click",t),this.selectedNode=t},handleClickFromDropdown:function(t){var e;e="number"===typeof t?t:t.id;var i=j(this.treeData,"id",(function(t,i){return i===e}));this.$emit("node-click",i),this.selectedNode=i},createBranch:function(t){if(this.selectedNode){if(this.selectedNode.id===t.id)return;return this.selectedNode.children.push(t),void(this.selectedNode=t)}this.fetchHistory();var e=j(this.treeData,"id",(function(e,i){return i===t.parent}));if(e){if(e.children.some((function(e){return e.id===t.id})))return;return e.children.push(t),void(this.selectedNode=t)}var i=j(this.treeData,"id",(function(e,i){return i===t.id}));i&&(this.selectedNode=i)},annotateNode:function(t){t.searchNode.labels.includes(t.type)||t.searchNode.labels.push(t.type)},scrollTo:function(){this.$nextTick((function(){document.getElementById(this.selectedNode.id.toString()).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}))},fetchHistory:function(){var t=this;C.getSearchHistoryTree(this.sketch.id).then((function(e){if(t.treeData=e.data.objects[0],!t.selectedNode){var i=e.data.meta["last_node_id"];t.selectedNode=j(t.treeData,"id",(function(t,e){return e===i}))}})).catch((function(t){}))}},beforeDestroy:function(){pe.$off("createBranch"),pe.$off("eventAnnotated"),pe.$off("triggerScrollTo"),pe.$off("selected-node-from-dropdown")},created:function(){pe.$on("createBranch",this.createBranch),pe.$on("eventAnnotated",this.annotateNode),pe.$on("triggerScrollTo",this.scrollTo),pe.$on("selected-node-from-dropdown",this.handleClickFromDropdown),this.fetchHistory()},watch:{selectedNode:function(){this.$store.dispatch("updateSearchNode",this.selectedNode),this.scrollTo()}}},A=I,q=Object(c["a"])(A,x,F,!1,null,null,null),H=q.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",disabled:!t.hasParent},on:{click:t.searchHistoryBack}},"v-btn",n,!1),s),[i("v-icon",[t._v("mdi-arrow-left")])],1)]}}])},[i("span",[t._v("Click to go back")])]),i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:"",disabled:!t.hasChild},on:{click:t.searchHistoryForward}},"v-btn",n,!1),s),[i("v-icon",[t._v("mdi-arrow-right")])],1)]}}])},[i("span",[t._v("Click to go forward")])]),i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.$emit("toggleSearchHistory")}}},"v-btn",n,!1),s),[i("v-icon",[t._v("mdi-history")])],1)]}}])},[i("span",[t._v("Click to see your search history")])])],1)},P=[],R={computed:{currentSearchNode:function(){return this.$store.state.currentSearchNode},hasParent:function(){return!!this.currentSearchNode&&"number"===typeof this.currentSearchNode.parent},hasChild:function(){return!!this.currentSearchNode&&this.currentSearchNode.children.length}},methods:{searchHistoryBack:function(){pe.$emit("selected-node-from-dropdown",this.currentSearchNode.parent)},searchHistoryForward:function(){if(this.currentSearchNode.children.length){var t=this.currentSearchNode.children.slice(-1).pop();pe.$emit("selected-node-from-dropdown",t)}}}},z=R,B=(i("35fd"),Object(c["a"])(z,M,P,!1,null,"6d090d22",null)),Y=B.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticStyle:{overflow:"hidden"},attrs:{outlined:"",height:"600"}},[i("v-toolbar",{attrs:{flat:""}},[i("v-tabs",{attrs:{grow:"",left:""},model:{value:t.searchDropdownTab,callback:function(e){t.searchDropdownTab=e},expression:"searchDropdownTab"}},[i("v-tab",[t._v(" Quick ")]),i("v-tab",[t._v(" DFIQ ")]),i("v-tab",[t._v(" Search Templates ")]),i("v-tab",[t._v(" Sigma ")])],1)],1),i("v-tabs-items",{model:{value:t.searchDropdownTab,callback:function(e){t.searchDropdownTab=e},expression:"searchDropdownTab"}},[i("v-tab-item",{attrs:{transition:!1}},[i("v-container",{staticClass:"ma-0",attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{cols:"4"}},[i("h5",{staticClass:"mt-3 ml-4"},[t._v("Data types")]),i("v-list",{staticClass:"overflow-y-auto",class:t.scrollbarTheme,staticStyle:{height:"500px"},attrs:{dense:""}},t._l(t.matches.dataTypes,(function(e){return i("v-list-item",{key:e.data_type,staticStyle:{"font-size":"0.9em"},on:{click:function(i){return t.searchForDataType(e.data_type)}}},[i("v-list-item-content",[i("span",[t._v(t._s(e.data_type)+"\n                    "),i("span",{staticClass:"font-weight-bold",staticStyle:{"font-size":"0.8em"}},[t._v("("+t._s(t._f("compactNumber")(e.count))+")")])])])],1)})),1)],1),i("v-divider",{attrs:{vertical:""}}),i("v-col",{attrs:{cols:"4"}},[i("h5",{staticClass:"mt-3 ml-5"},[t._v("Tags")]),i("v-list",{staticClass:"overflow-y-auto",class:t.scrollbarTheme,staticStyle:{height:"500px"},attrs:{dense:""}},[t._l(t.matches.labels,(function(e){return i("v-list-item",{key:e.label,staticStyle:{"font-size":"0.9em"},on:{click:function(i){return t.searchForLabel(e.label)}}},["__ts_star"===e.label?i("v-icon",{attrs:{left:"",small:"",color:"#FFC300"}},[t._v("mdi-star")]):t._e(),"__ts_comment"===e.label?i("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-comment-multiple-outline")]):t._e(),i("v-list-item-content",[i("span",[t._v(t._s(t._f("formatLabelText")(e.label))+"\n                    "),i("span",{staticClass:"font-weight-bold",staticStyle:{"font-size":"0.8em"}},[t._v("("+t._s(t._f("compactNumber")(e.count))+")")])])])],1)})),t._l(t.matches.tags,(function(e){return i("v-list-item",{key:e.tag,staticStyle:{"font-size":"0.9em"},on:{click:function(i){return t.searchForTag(e.tag)}}},[i("v-list-item-content",[i("span",[t._v(t._s(e.tag)+"\n                    "),i("span",{staticClass:"font-weight-bold",staticStyle:{"font-size":"0.8em"}},[t._v("("+t._s(t._f("compactNumber")(e.count))+")")])])])],1)}))],2)],1),i("v-divider",{attrs:{vertical:""}}),t.matches.savedSearches.length?i("v-col",{attrs:{cols:"4"}},[i("h5",{staticClass:"mt-3 ml-4"},[t._v("Saved searches")]),i("v-list",{staticClass:"overflow-y-auto",class:t.scrollbarTheme,staticStyle:{height:"500px"},attrs:{dense:""}},t._l(t.matches.savedSearches,(function(e){return i("v-list-item",{key:e.id,staticStyle:{"font-size":"0.9em"},on:{click:function(i){return t.$emit("setActiveView",e)}}},[i("v-list-item-content",[t._v("\n                  "+t._s(e.name)+"\n                ")])],1)})),1)],1):t._e()],1)],1)],1)],1)],1)},G=[],J=(i("8615"),function(){return{from:0,terminate_after:40,size:40,indices:"_all",order:"asc",chips:[]}}),V={props:["selectedLabels","queryString"],data:function(){return{searchDropdownTab:null}},computed:{meta:function(){return this.$store.state.meta},searchHistory:function(){return this.$store.state.searchHistory},tags:function(){return this.$store.state.tags},dataTypes:function(){return this.$store.state.dataTypes},all:function(){return{fields:this.meta.mappings,tags:this.tags,labels:this.meta.filter_labels,dataTypes:this.dataTypes,savedSearches:this.meta.views}},scrollbarTheme:function(){return this.$vuetify.theme.dark?"dark":"light"},matches:function(){var t=this,e={};return this.queryString?(e["fields"]=this.meta.mappings.filter((function(e){return e.field.toLowerCase().includes(t.queryString.toLowerCase())})),e["tags"]=this.tags.filter((function(e){return e.tag.toLowerCase().includes(t.queryString.toLowerCase())})),e["labels"]=this.meta.filter_labels.filter((function(e){return e.label.toLowerCase().includes(t.queryString.toLowerCase())})),e["dataTypes"]=this.dataTypes.filter((function(e){return e.data_type.toLowerCase().includes(t.queryString.toLowerCase())})),e["savedSearches"]=this.meta.views.filter((function(e){return e.name.toLowerCase().includes(t.queryString.toLowerCase())})),Object.values(e).filter((function(t){return t.length})).length?e:this.all):this.all}},methods:{searchForLabel:function(t){var e={doSearch:!0,queryString:"*"};e.queryFilter=J();var i={field:"",value:t,type:"label",operator:"must",active:!0};e.queryFilter.chips.push(i),this.$emit("setQueryAndFilter",e)},searchForTag:function(t){var e={doSearch:!0};e.queryString="tag:"+t,e.queryFilter=J(),this.$emit("setQueryAndFilter",e)},searchForDataType:function(t){var e={doSearch:!0};e.queryString='data_type:"'+t+'"',e.queryFilter=J(),this.$emit("setQueryAndFilter",e)},searchForField:function(t){var e={},i="";""!==this.queryString&&(i=this.queryString+" "),this.queryString.includes(" ")||(i=""),e.doSearch=!1,e.queryString=i+t+":",e.queryFilter=J(),this.$emit("setQueryAndFilter",e)}}},W=V,K=(i("9c2c"),Object(c["a"])(W,U,G,!1,null,"ad97ca66",null)),X=K.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("apexchart",{attrs:{height:"250",options:t.options,series:t.series}})],1)},tt=[],et=(i("28a5"),i("ffc1"),i("1321")),it=i.n(et),st={props:["chartData"],components:{Apexchart:it.a},data:function(){var t=this;return{options:{chart:{type:"bar",zoom:{enabled:!0,type:"x",autoScaleYaxis:!0},foreColor:"#fff",animations:{enabled:!0,easing:"easeinout",speed:50,animateGradually:{enabled:!0,delay:50},dynamicAnimation:{enabled:!0,speed:50}},colors:["#4285f"],toolbar:{show:!0,tools:{download:!1,selection:!0,zoom:!0,zoomin:!0,zoomout:!0}},events:{dataPointSelection:function(e,i,s){t.emitFilterRequest(s)}}},tooltip:{enabled:!0,followCursor:!1,theme:"dark",x:{formatter:function(e){var i=t.getBucketDateTimeRange(e),s=t.$moment.duration(i.start.diff(i.end));return"".concat(i.start.format("YYYY-MM-DD HH:mm:ss")," + ").concat(s.humanize())}}},plotOptions:{bar:{columnWidth:"95%",borderRadius:4}},dataLabels:{enabled:!1},grid:{xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}}},xaxis:{type:"datetime",tickPlacement:"on"}}}},computed:{series:function(){var t={name:"Events",data:[]};return this.chartData?(t.data=Object.entries(this.chartData.data).map((function(t){return[parseInt(t[0]),t[1]]})),[t]):[t]}},methods:{getBucketDateTimeRange:function(t){var e=this.$moment.utc(t),i=this.chartData.interval.split(/(\d+)/),s=i[1],n=i[2],r=this.$moment.utc(t).add(parseInt(s),n);return{start:e,end:r}},emitFilterRequest:function(t){var e=t.selectedDataPoints[0][0],i=t.w.config.series[0]["data"];if(1!==i.length){var s=i[e][0],n=this.getBucketDateTimeRange(s),r={field:"",type:"datetime_range",value:n.start.toISOString()+","+n.end.toISOString(),operator:"must",active:!0};this.$emit("addChip",r)}},setTheme:function(){"dark"===localStorage.theme?this.options={chart:{foreColor:"#fff"},tooltip:{theme:"dark"}}:this.options={chart:{foreColor:"#333"},tooltip:{theme:"light"}}}},created:function(){pe.$on("isDarkTheme",this.setTheme)},mounted:function(){this.setTheme()}},nt=st,rt=Object(c["a"])(nt,Z,tt,!1,null,null,null),at=rt.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-chip-group",t._l(t.activeTimelines,(function(e){return i("ts-timeline-chip",{key:e.id+e.name,attrs:{timeline:e,"is-selected":t.isSelected(e),"is-empty-state":t.isEmptyState,"events-count":t.getCount(e)},on:{remove:t.remove,save:t.save,toggle:t.toggleTimeline}})})),1)},ct=[],lt=(i("55dd"),i("75fc")),ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{"offset-y":"","content-class":"menu-with-gap"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-chip",t._g({style:t.getTimelineStyle(t.timeline)},s),[t._v("\n      "+t._s(t.timeline.name)+"\n      "),i("v-avatar",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.1)","font-size":"0.55em"},attrs:{right:""}},[t._v("\n        "+t._s(t._f("compactNumber")(t.eventsCount))+"\n      ")])],1)]}}])},[i("v-card",{attrs:{width:"300"}},[i("v-list",[i("v-list-item",[i("v-list-item-action",[i("v-icon",[t._v("mdi-square-edit-outline")])],1),i("v-list-item-subtitle",[t._v("Rename timeline")])],1),i("v-list-item",{on:{click:function(e){return t.toggleTimeline(t.timeline)}}},[i("v-list-item-action",[t.isSelected?i("v-icon",[t._v("mdi-eye-off")]):i("v-icon",[t._v("mdi-eye")])],1),t.isSelected?i("v-list-item-subtitle",[t._v("Temporarily disabled")]):i("v-list-item-subtitle",[t._v("Re-enable")])],1),i("v-list-item",{on:{click:function(e){return t.removeChip(t.chip)}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-delete")])],1),i("v-list-item-subtitle",[t._v("Remove from sketch")])],1)],1)],1)],1)},ht=[],dt=i("2ef0"),mt=i.n(dt),vt={props:["timeline","eventsCount","isSelected","isEmptyState"],data:function(){return{initialColor:{},newColor:"",newTimelineName:"",timelineStatus:"",colorPickerActive:!1,showInfoModal:!1,showEditModal:!1,showAnalyzerModal:!1,isDarkTheme:!1}},computed:{meta:function(){return this.$store.state.meta},datasourceErrors:function(){return this.timeline.datasources.filter((function(t){return t.error_message}))}},methods:{showColorPicker:function(){this.$refs.colorPicker.click()},rename:function(){this.showEditModal=!1,this.$emit("save",this.timeline,this.newTimelineName)},remove:function(){confirm("Delete the timeline?")&&this.$emit("remove",this.timeline)},updateColor:mt.a.debounce((function(t){this.newColor=t.hex,this.newColor.startsWith("#")&&(this.newColor=this.newColor.substring(1)),s["default"].set(this.timeline,"color",this.newColor),this.$emit("save",this.timeline)}),0),toggleTheme:function(){this.isDarkTheme=!this.isDarkTheme},getTimelineStyle:function(t){var e=t.color,i="none",s="100%";return e.startsWith("#")||(e="#"+e),this.isSelected||(e="#d2d2d2",i="line-through",s="50%"),this.$vuetify.theme.dark?{"background-color":e,filter:"grayscale(25%)",color:"#333"}:{"background-color":e,"text-decoration":i,opacity:s}},toggleTimeline:function(t){this.$emit("toggle",t)}},mounted:function(){var t=this;window.addEventListener("click",(function(e){t.$el.contains(e.target)||(t.colorPickerActive=!1)}))},created:function(){this.isDarkTheme="dark"===localStorage.theme,pe.$on("isDarkTheme",this.toggleTheme),this.initialColor={hex:this.timeline.color},this.timelineStatus=this.timeline.status[0].status,this.newTimelineName=this.timeline.name},beforeDestroy:function(){clearInterval(this.t),this.t=!1}},ft=vt,pt=Object(c["a"])(ft,ut,ht,!1,null,"8922f7b0",null),gt=pt.exports,yt={components:{TsTimelineChip:gt},props:["currentQueryFilter","countPerIndex","countPerTimeline"],computed:{sketch:function(){return this.$store.state.sketch},activeTimelines:function(){var t=Object(lt["a"])(this.sketch.active_timelines);return t.sort((function(t,e){return t.name.localeCompare(e.name)}))},isEmptyState:function(){return void 0===this.countPerTimeline}},data:function(){return{isDarkTheme:!1,isLoading:!1,selectedTimelines:[]}},methods:{isSelected:function(t){return this.selectedTimelines.includes(t)},getCount:function(t){var e=0;return this.countPerTimeline&&(e=this.countPerTimeline[t.id],"number"===typeof e)||!e&&this.countPerIndex&&(e=this.countPerIndex[t.searchindex.index_name]),e},remove:function(t){var e=this;this.isLoading=!0,C.deleteSketchTimeline(this.sketch.id,t.id).then((function(){e.$store.dispatch("updateSketch",e.sketch.id).then((function(){e.syncSelectedTimelines(),e.isLoading=!1}))})).catch((function(t){console.error(t),e.isLoading=!1}))},save:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i&&(this.isLoading=!0),C.saveSketchTimeline(this.sketch.id,t.id,i||t.name,t.description,t.color).then((function(){e.$store.dispatch("updateSketch",e.sketch.id).then((function(){e.syncSelectedTimelines(),e.isLoading=!1}))})).catch((function(t){console.error(t),e.isLoading=!1}))},enableAllTimelines:function(){this.selectedTimelines=this.activeTimelines,this.$emit("updateSelectedTimelines",this.selectedTimelines)},disableAllTimelines:function(){this.selectedTimelines=[],this.$emit("updateSelectedTimelines",this.selectedTimelines)},toggleTimeline:function(t){var e=this.selectedTimelines.slice(),i=e.indexOf(t);-1===i?e.push(t):e.splice(i,1),this.selectedTimelines=e,this.$emit("updateSelectedTimelines",this.selectedTimelines)},toggleTheme:function(){this.isDarkTheme=!this.isDarkTheme},syncSelectedTimelines:function(){var t=this;if(this.currentQueryFilter.indices.includes("_all"))this.selectedTimelines=this.activeTimelines;else{var e=[];this.currentQueryFilter.indices.forEach((function(i){if("string"===typeof i){var s=t.activeTimelines.find((function(t){return t.searchindex.index_name===i}));e.push(s)}else if("number"===typeof i){var n=t.activeTimelines.find((function(t){return t.id===i}));e.push(n)}})),this.selectedTimelines=e}}},created:function(){pe.$on("isDarkTheme",this.toggleTheme),pe.$on("clearSearch",this.enableAllTimelines),this.currentQueryFilter.indices.includes("_all")?this.selectedTimelines=this.activeTimelines:this.syncSelectedTimelines()},watch:{"currentQueryFilter.indices":function(t){this.syncSelectedTimelines()},deep:!0}},_t=yt,bt=Object(c["a"])(_t,ot,ct,!1,null,null,null),kt=bt.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticStyle:{overflow:"visible"},attrs:{width:"700"}},[i("v-toolbar",{attrs:{flat:""}},[i("v-tabs",{attrs:{centered:"",grow:""},model:{value:t.filterTab,callback:function(e){t.filterTab=e},expression:"filterTab"}},[i("v-tab",[t._v(" Time filter ")]),i("v-tab",[t._v(" Field filter ")])],1)],1),i("v-tabs-items",{model:{value:t.filterTab,callback:function(e){t.filterTab=e},expression:"filterTab"}},[i("v-tab-item",{attrs:{transition:!1}},[i("v-container",{staticClass:"px-8"},[i("br"),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:""},on:{click:function(e){return t.getDateRange(0,"days")}}},[t._v("Today")]),i("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:""},on:{click:function(e){return t.getDateRange(7,"days")}}},[t._v("Last 7 days")]),i("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:""},on:{click:function(e){return t.getDateRange(30,"days")}}},[t._v("Last 30 days")]),i("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:""},on:{click:function(e){return t.getDateRange(90,"days")}}},[t._v("Last 90 days")]),i("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:""},on:{click:function(e){return t.getDateRange(1,"year")}}},[t._v("Last 1 year")])],1)],1),i("v-row",[i("v-col",{attrs:{cols:"6"}},[i("v-text-field",{attrs:{value:t.formatStartTime,label:"From",outlined:"","hide-details":""},on:{click:function(e){t.showPicker=!0},change:t.setStartTime}})],1),i("v-col",{attrs:{cols:"6"}},[i("v-text-field",{attrs:{value:t.formatEndTime,label:"To (optional)",outlined:"","hide-details":"","append-outer-icon":t.showPicker?"mdi-calendar-remove":"mdi-calendar"},on:{click:function(e){t.showPicker=!0},change:t.setEndTime,"click:append-outer":function(e){t.showPicker=!t.showPicker}}})],1)],1),t.showPicker?i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("date-picker",{ref:"picker",attrs:{mode:"dateTime",timezone:"UTC","is-dark":t.$vuetify.theme.dark,is24hr:"","is-range":"","is-expanded":""},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)],1):t._e(),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.clearAndCancel}},[t._v(" Cancel ")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.submit()}}},[t._v(" Add filter ")])],1)],1)],1),i("v-tab-item",{attrs:{transition:!1}},[i("v-container",{staticClass:"px-8"},[t._v("Not implemented yet")])],1)],1)],1)},wt=[],Tt=i("707c"),Ct=i("404b"),xt=i.n(Ct),Ft={components:{DatePicker:xt.a},data:function(){return{range:{start:"",end:""},filterTab:null,showPicker:!1}},computed:{dateRange:{set:function(t){this.range.start=Tt["a"].utc(t.start).millisecond(0).toISOString(),this.range.end=Tt["a"].utc(t.end).millisecond(0).toISOString()},get:function(){var t={start:this.range.start,end:this.range.end};return t}},formatStartTime:function(){return this.range.start},formatEndTime:function(){return this.range.start!==this.range.end&&this.range.start?this.range.end:""}},methods:{getDateRange:function(t,e){var i=Tt["a"].utc(),s=i.subtract(t,e),n="datetime_range",r=s.format("YYYY-MM-DD")+","+i.format("YYYY-MM-DD");return this.chip={field:"",type:n,value:r,operator:"must",active:!0},this.$emit("addChip",this.chip),this.$emit("cancel"),{start:i,end:s}},setStartTime:function(t){t?(this.range.start=Tt["a"].utc(t).toISOString(),this.range.end||this.range.start&&(this.range.end=this.range.start||""),this.$refs.picker.focusDate(this.range.start)):this.range.start=""},setEndTime:function(t){t?(this.range.end=Tt["a"].utc(t).toISOString(),this.$refs.picker.focusDate(this.range.start)):this.range.end=""},addDateTimeChip:function(t){var e="datetime_range",i={field:"",type:e,value:t,operator:"must",active:!0};this.$emit("addChip",i),this.range={start:null,end:null}},clearAndCancel:function(){this.range={start:"",end:""},this.$emit("cancel")},submit:function(){if(this.range.start){if(this.range.start===this.range.end){var t=this.range.start.split("T"),e=t[0],i=e+","+e;this.addDateTimeChip(i)}if(this.range.start,this.range.end,this.range.start!==this.range.end){var s="datetime_range",n=this.range.start+","+this.range.end;this.chip={field:"",type:s,value:n,operator:"must",active:!0},this.$emit("addChip",this.chip),this.range={start:"",end:""}}this.$emit("cancel")}}}},Et=Ft,$t=Object(c["a"])(Et,St,wt,!1,null,"854101fc",null),Dt=$t.exports,Lt=i("e1a1"),Ot=i("34f3"),Qt=function(){return{from:0,terminate_after:40,size:40,indices:[],order:"asc",chips:[]}},Nt=function(){return{meta:{count_per_index:{}},objects:[]}},jt={directives:{dragscroll:Ot["a"]},components:{TsSearchHistoryTree:H,TsSearchHistoryButtons:Y,TsSearchDropdown:X,TsBarChart:at,TsTimelinePicker:kt,TsFilterMenu:Dt},props:["sketchId"],data:function(){return{headers:[{text:"",value:"data-table-select"},{text:"Datetime (UTC)",align:"start",value:"_source.timestamp",width:"230"},{value:"actions",width:"90"},{text:"Message",align:"start",value:"_source.message",width:"100%"},{value:"timeline_name",align:"end"}],tableOptions:{itemsPerPage:40},drawer:!1,expandedRows:[],timeFilterMenu:!1,params:{},showCreateViewModal:!1,showFilterCard:!0,showSearch:!0,searchInProgress:!1,currentPage:1,contextEvent:!1,originalContext:!1,isFullPage:!0,loadingComponent:null,showSearchDropdown:!1,eventList:{meta:{},objects:[]},currentQueryString:"",currentQueryFilter:Qt(),selectedFields:[{field:"message",type:"text"}],selectedFieldsProxy:[],expandFieldDropdown:!1,selectedEvents:[],displayOptions:{isCompact:!1,showTags:!0,showEmojis:!0,showMillis:!1},selectedLabels:[],showSearchHistory:!1,showHistogram:!1,branchParent:Lt["a"],zoomLevel:.7,zoomOrigin:{x:0,y:0}}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},totalHits:function(){return this.eventList.meta.es_total_count_complete||0},totalHitsForPagination:function(){var t=this.eventList.meta.es_total_count_complete||0;return t>9999&&(t=1e4),t},totalTime:function(){return this.eventList.meta.es_time/1e3||0},fromEvent:function(){return this.currentQueryFilter.from||1},toEvent:function(){if(!(this.totalHits<this.currentQueryFilter.size))return parseInt(this.currentQueryFilter.from)+parseInt(this.currentQueryFilter.size)},numSelectedEvents:function(){return this.selectedEvents.length},filterChips:function(){return this.currentQueryFilter.chips.filter((function(t){return"label"===t.type||"term"===t.type}))},timeFilterChips:function(){return this.currentQueryFilter.chips.filter((function(t){return t.type.startsWith("datetime")}))},filteredLabels:function(){return this.$store.state.meta.filter_labels.filter((function(t){return!t.label.startsWith("__")}))},currentSearchNode:function(){return this.$store.state.currentSearchNode}},methods:{toggleSearchHistory:function(){this.showSearchHistory=!this.showSearchHistory,this.showSearchHistory&&this.triggerScrollTo()},toggleDetailedEvent:function(t){var e=this.expandedRows.findIndex((function(e){return e._id===t._id}));if(this.expandedRows.some((function(e){return e._id===t._id}))){if(!t.showDetails)return t["showDetails"]=!0,this.expandedRows.splice(e,1),void this.expandedRows.push(t);t["showDetails"]=!1,this.expandedRows.splice(e,1),t.deltaDays&&(this.expandedRows.splice(e,1),this.expandedRows.push(t))}else t["showDetails"]=!0,this.expandedRows.push(t)},addTimeBubbles:function(){var t=this;this.expandedRows=[],this.eventList.objects.forEach((function(e,i){if(!(i<1)){var s=t.eventList.objects[i-1],n=t.$options.filters.formatTimestamp(e._source.timestamp),r=t.$options.filters.formatTimestamp(s._source.timestamp),a=Math.floor(n/1e3),o=Math.floor(r/1e3),c=Math.floor(a-o);"desc"===t.order&&(c=Math.floor(o-a));var l=Math.floor(c/60/60/24);l>0&&(s["deltaDays"]=l,t.expandedRows.push(s))}}))},getTimeline:function(t){var e,i=this.meta.indices_metadata[t._index].is_legacy;return e=i?this.sketch.active_timelines.filter((function(e){return e.searchindex.index_name===t._index}))[0]:this.sketch.active_timelines.filter((function(e){return e.id===t._source.__ts_timeline_id}))[0],e},getTimelineColor:function(t){var e=this.getTimeline(t),i=e.color;return i.startsWith("#")||(i="#"+i),this.$vuetify.theme.dark?{"background-color":i,filter:"grayscale(25%)",color:"#333"}:{"background-color":i}},getTimeBubbleColor:function(){var t="#f5f5f5";return this.$vuetify.theme.dark&&(t="#333"),{"background-color":t}},search:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.currentQueryString){this.searchInProgress=!0,this.contextEvent&&this.$scrollTo("#context",200,{offset:-300}),this.selectedEvents=[],this.eventList=Nt(),i&&(this.currentQueryFilter.from=0,this.currentPage=1),this.currentQueryFilter.fields=this.selectedFields;var r={query:this.currentQueryString,filter:this.currentQueryFilter};s&&(r["incognito"]=!0),n&&(r["parent"]=n),n&&s&&(this.branchParent=n),this.branchParent&&(r["parent"]=this.branchParent),e&&(pe.$emit("newSearch"),this.showSearchDropdown=!1),C.search(this.sketchId,r).then((function(e){t.eventList.objects=e.data.objects,t.eventList.meta=e.data.meta,t.searchInProgress=!1,t.addTimeBubbles(),s||(pe.$emit("createBranch",t.eventList.meta.search_node),t.$store.dispatch("updateSearchHistory"),t.branchParent=t.eventList.meta.search_node.id)})).catch((function(t){}))}},setQueryAndFilter:function(t){this.currentQueryString=t.queryString,this.currentQueryFilter=t.queryFilter,t.doSearch&&this.search()},exportSearchResult:function(){var t=this,e={query:this.currentQueryString,filter:this.currentQueryFilter,file_name:"export.zip"};C.exportSearchResult(this.sketchId,e).then((function(e){var i=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a"),n="export.zip";s.href=i,s.setAttribute("download",n),document.body.appendChild(s),s.click(),t.loadingClose()})).catch((function(t){console.error(t)}))},searchView:function(t){var e=this;this.selectedEvents=[],this.showSearchDropdown=!1,this.showSaveSearchModal=!1,t!==parseInt(t,10)&&"string"!==typeof t&&(t=t.id,this.$router.push({name:"Explore",query:{view:t}})),C.getView(this.sketchId,t).then((function(t){var i=t.data.objects[0];if(e.currentQueryString=i.query_string,e.currentQueryFilter=JSON.parse(i.query_filter),e.currentQueryFilter.fields&&e.currentQueryFilter.fields.length||(e.currentQueryFilter.fields=[{field:"message",type:"text"}]),e.selectedFields=e.currentQueryFilter.fields,"_all"===e.currentQueryFilter.indices[0]||"_all"===e.currentQueryFilter.indices){var s=[];e.sketch.active_timelines.forEach((function(t){var i=e.meta.indices_metadata[t.searchindex.index_name].is_legacy;i?s.push(t.searchindex.index_name):s.push(t.id)})),e.currentQueryFilter.indices=s}var n=e.currentQueryFilter.chips;if(n)for(var r=0;r<n.length;r++)"label"===n[r].type&&e.selectedLabels.push(n[r].value);e.contextEvent=!1,e.search(!1)})).catch((function(t){}))},searchContext:function(t){var e=300,i=500;if(this.contextEvent=t,!this.originalContext){var s=JSON.parse(JSON.stringify(this.currentQueryString)),n=JSON.parse(JSON.stringify(this.currentQueryFilter));this.originalContext={queryString:s,queryFilter:n}}var r="YYYY-MM-DDTHH:mm:ss",a=this.$moment.utc(this.contextEvent._source.datetime),o=a.clone().subtract(e,"s").format(r),c=a.clone().add(e,"s").format(r),l={field:"",value:o+","+a.format(r),type:"datetime_range",operator:"must",active:!0},u={field:"",value:a.format(r)+","+c,type:"datetime_range",operator:"must",active:!0};this.currentQueryString="* OR _id:"+this.contextEvent._id,this.currentQueryFilter.chips=[l,u];var h=this.meta.indices_metadata[this.contextEvent._index].is_legacy;this.currentQueryFilter.indices=h?[this.contextEvent._index]:[this.contextEvent._source.__ts_timeline_id],this.currentQueryFilter.size=i,this.search()},removeContext:function(){this.contextEvent=!1,this.currentQueryString=JSON.parse(JSON.stringify(this.originalContext.queryString)),this.currentQueryFilter=JSON.parse(JSON.stringify(this.originalContext.queryFilter)),this.search()},updateSelectedTimelines:function(t){var e=this,i=[];t.forEach((function(t){var s=e.meta.indices_metadata[t.searchindex.index_name].is_legacy;s?i.push(t.searchindex.index_name):i.push(t.id)})),this.currentQueryFilter.indices=i,this.search()},clearSearch:function(){this.currentQueryString="",this.currentQueryFilter=Qt(),this.currentQueryFilter.indices="_all",this.eventList=Nt(),this.$router.replace({query:null})},toggleChip:function(t){void 0===t.active&&(t.active=!0),t.active=!t.active,this.search()},removeChip:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.currentQueryFilter.chips.findIndex((function(e){return e.value===t.value}));this.currentQueryFilter.chips.splice(i,1),"label"===t.type&&(this.selectedLabels=this.selectedLabels.filter((function(e){return e!==t.value}))),e&&this.search()},updateChip:function(t,e){var i=this.currentQueryFilter.chips.findIndex((function(t){return t.value===e.value&&t.type===e.type}));this.currentQueryFilter.chips.splice(i,1,t),this.search()},addChip:function(t){this.currentQueryFilter.chips||(this.currentQueryFilter.chips=[]),this.currentQueryFilter.chips.push(t),this.search()},addChipFromHistogram:function(t){var e=this;this.currentQueryFilter.chips||(this.currentQueryFilter.chips=[]),this.currentQueryFilter.chips.forEach((function(t){"datetime_range"===t.type&&e.removeChip(t,!1)})),this.addChip(t)},toggleLabelChip:function(t){var e={field:"",value:t,type:"label",operator:"must",active:!0},i=this.currentQueryFilter.chips;if(i)for(var s=0;s<i.length;s++)if(i[s].value===t)return void this.removeChip(s);this.addChip(e)},updateLabelChips:function(){var t=this;this.currentQueryFilter.chips=this.currentQueryFilter.chips.filter((function(t){return"label"!==t.type})),this.selectedLabels.forEach((function(e){var i={field:"",value:e,type:"label",operator:"must",active:!0};t.addChip(i),t.showSearchDropdown=!1}))},updateLabelList:function(t){-1===this.meta.filter_labels.indexOf(t)&&this.meta.filter_labels.push(t)},paginate:function(t){this.currentQueryFilter.from=t*this.currentQueryFilter.size-this.currentQueryFilter.size,this.search(!0,!1,!0)},updateSelectedFields:function(t){var e=this;t.forEach((function(t){!e.selectedFields.filter((function(e){return e.field===t.field})).length>0&&e.search(!0,!0,!0)})),t.forEach((function(t){e.selectedFields.push(t)})),this.selectedFieldsProxy=[]},removeField:function(t){this.selectedFields.splice(t,1)},toggleStar:function(){var t=this,e=[];Object.keys(this.selectedEvents).forEach((function(i,s){e.push(t.selectedEvents[i])})),C.saveEventAnnotation(this.sketch.id,"label","__ts_star",e,this.currentSearchNode).then((function(t){})).catch((function(t){})),pe.$emit("toggleStar",this.selectedEvents)},changeSortOrder:function(){"asc"===this.currentQueryFilter.order?this.currentQueryFilter.order="desc":this.currentQueryFilter.order="asc",this.search(!0,!0,!0)},loadingOpen:function(){this.loadingComponent=this.$buefy.loading.open({container:this.isFullPage?null:this.$refs.element.$el})},loadingClose:function(){this.loadingComponent.close()},jumpInHistory:function(t){var e=this;if(this.currentQueryString=t.query_string,this.currentQueryFilter=JSON.parse(t.query_filter),this.currentQueryFilter.fields&&this.currentQueryFilter.fields.length||(this.currentQueryFilter.fields=[{field:"message",type:"text"}]),this.selectedFields=this.currentQueryFilter.fields,"_all"===this.currentQueryFilter.indices[0]||"_all"===this.currentQueryFilter.indices){var i=[];this.sketch.active_timelines.forEach((function(t){var s=e.meta.indices_metadata[t.searchindex.index_name].is_legacy;s?i.push(t.searchindex.index_name):i.push(t.id)})),this.currentQueryFilter.indices=i}var s=this.currentQueryFilter.chips;if(s)for(var n=0;n<s.length;n++)"label"===s[n].type&&this.selectedLabels.push(s[n].value);this.contextEvent=!1,this.search(!1,!0,!0,t.id)},triggerScrollTo:function(){pe.$emit("triggerScrollTo")},zoomWithMouse:function(t){this.zoomOrigin.x=t.pageX,this.zoomOrigin.y=t.pageY,t.deltaY<0?this.zoomLevel+=.07:t.deltaY>0&&(this.zoomLevel-=.07)},closeSearchDropdown:function(t){t!==this.$refs.searchInput&&null===t.getAttribute("data-explore-element")&&(this.showSearchDropdown=!1)},onClickOutside:function(t){"tsSearchInput"!==t.target.id&&(this.showSearchDropdown=!1)}},watch:{numEvents:function(t){this.currentQueryFilter.size=t,this.search(!1,!0,!0)}},mounted:function(){this.$refs.searchInput.focus()},created:function(){var t=this,e=!1;if(this.params={viewId:this.$route.query.view,indexName:this.$route.query.timeline,resultLimit:this.$route.query.limit,queryString:this.$route.query.q},this.params.viewId)this.searchView(this.params.viewId);else{if(this.params.queryString&&(this.currentQueryString=this.params.queryString,e=!0),this.params.indexName){this.params.queryString||(this.currentQueryString="*");var i=this.sketch.active_timelines.find((function(e){return e.id===parseInt(t.params.indexName,10)})),s=this.meta.indices_metadata[i.searchindex.index_name].is_legacy;this.currentQueryFilter.indices=s?[i.searchindex.index_name]:[i.id],e=!0}this.currentQueryString||(this.currentQueryFilter.indices=["_all"]),e&&(this.currentQueryFilter.indices.length||(this.currentQueryFilter.indices=["_all"]),this.search())}}},It=jt,At=(i("2d9e"),Object(c["a"])(It,y,_,!1,null,null,null)),qt=At.exports,Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.sketch.status?i("router-view"):t._e()},Mt=[],Pt={props:["sketchId"],created:function(){this.$store.dispatch("updateSketch",this.sketchId),this.$store.dispatch("updateSearchHistory",this.sketchId),this.$store.dispatch("updateSigmaList",this.sketchId)},computed:{sketch:function(){return this.$store.state.sketch}},watch:{sketch:function(t){"archived"===t.status[0].status&&this.$router.push({name:"Overview",params:{sketchId:this.sketch.id}}),document.title=this.sketch.name}}},Rt=Pt,zt=Object(c["a"])(Rt,Ht,Mt,!1,null,null,null),Bt=zt.exports,Yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"mt-2"},[i("v-navigation-drawer",{attrs:{app:"",clipped:"",permanent:"",right:"",width:"400"},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("v-list",{attrs:{dense:""}},[i("v-card-title",[t._v("Team")]),i("v-list-item",[i("v-list-item-avatar",[i("v-avatar",{staticClass:"ml-3",attrs:{color:"orange",size:"32"}},[i("span",{staticClass:"white--text"},[t._v("jb")])])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("John Doe")]),i("v-list-item-subtitle",[t._v("Creator")])],1)],1),i("v-list-item",[i("v-list-item-avatar",[i("v-avatar",{staticClass:"ml-3",attrs:{color:"orange",size:"32"}},[i("span",{staticClass:"white--text"},[t._v("jb")])])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Jane Doe")]),i("v-list-item-subtitle",[t._v("Working on ...")])],1)],1)],1),i("v-divider"),i("v-list",{attrs:{dense:""}},[i("v-card-title",[t._v("Timelines")]),t._l(t.sketch.active_timelines,(function(e){return i("v-list-item",{key:e.id,attrs:{link:""}},[i("v-list-item-avatar",{attrs:{rounded:"",color:"#"+e.color}}),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e.name))]),i("v-list-item-subtitle",[t._v("\n              "+t._s(e.color)+"\n            ")])],1),i("v-list-item-action",[i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"grey"}},[t._v("mdi-information")])],1)],1),i("v-list-item-action",[i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"grey"}},[t._v("mdi-dots-vertical")])],1)],1)],1)}))],2)]},proxy:!0}])}),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-container",[i("h3",{staticClass:"mb-4"},[t._v("Summary")]),i("p",{staticStyle:{"max-width":"800px"}},[t._v("\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean risus diam, dictum ut ultricies ac, aliquet\n          eget sem. Vestibulum mollis, est at euismod laoreet, nisi nibh mollis dolor, quis laoreet odio ipsum\n          volutpat leo. Curabitur vel convallis turpis. Fusce quam odio, viverra ac volutpat nec, gravida et purus.\n          Mauris scelerisque eleifend ligula eget laoreet. Etiam mattis massa ex. Sed ullamcorper hendrerit nunc,\n          sodales imperdiet odio bibendum eu. Mauris ornare quis mi sed facilisis.\n        ")])])],1)],1)],1)},Ut=[],Gt={components:{},data:function(){return{showUploadTimelineModal:!1,showDeleteSketchModal:!1,showShareModal:!1,isFullPage:!0,loadingComponent:null,isArchived:!1}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},count:function(){return this.$store.state.count},shareTooltip:function(){var t="",e="Shared with ";return this.meta.collaborators.users.length&&(t=e+this.meta.collaborators.users.length+" users",this.meta.collaborators.groups.length&&(t=t+" and "+this.meta.collaborators.groups.length+" groups")),!t&&this.meta.collaborators.groups.length&&(t=e+this.meta.collaborators.groups.length+" groups"),t}},methods:{deleteSketch:function(){var t=this;C.deleteSketch(this.sketch.id).then((function(e){t.$router.push({name:"Home"})})).catch((function(t){console.error(t)}))},archiveSketch:function(){var t=this;this.isArchived=!0,C.archiveSketch(this.sketch.id).then((function(e){t.$store.dispatch("updateSketch",t.sketch.id),t.$router.push({name:"Overview",params:{sketchId:t.sketch.id}})})).catch((function(t){console.error(t)}))},unArchiveSketch:function(){var t=this;this.isArchived=!1,C.unArchiveSketch(this.sketch.id).then((function(e){t.$store.dispatch("updateSketch",t.sketch.id),t.$router.push({name:"Overview",params:{sketchId:t.sketch.id}})})).catch((function(t){console.error(t)}))},exportSketch:function(){var t=this;this.loadingOpen(),C.exportSketch(this.sketch.id).then((function(e){var i=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a"),n="sketch-"+t.sketch.id+"-export.zip";s.href=i,s.setAttribute("download",n),document.body.appendChild(s),s.click(),t.loadingClose()})).catch((function(e){console.error(e),t.loadingClose()}))},sortedUserList:function(){var t=Object(lt["a"])(this.$store.state.meta.collaborators.users);return t.sort()},sortedGroupList:function(){var t=Object(lt["a"])(this.$store.state.meta.collaborators.groups);return t.sort()},closeShareModal:function(){this.showShareModal=!1,this.$buefy.snackbar.open({duration:3500,message:"Sharing settings have been saved",type:"is-white",position:"is-top",queue:!1}),this.$store.dispatch("updateSketch",this.sketch.id)},loadingOpen:function(){this.loadingComponent=this.$buefy.loading.open({container:this.isFullPage?null:this.$refs.element.$el})},loadingClose:function(){this.loadingComponent.close()}},created:function(){"archived"===this.sketch.status[0].status&&(this.isArchived=!0)}},Jt=Gt,Vt=(i("c4a3"),Object(c["a"])(Jt,Yt,Ut,!1,null,null,null)),Wt=Vt.exports;s["default"].use(h["a"]);var Kt=[{name:"Home",path:"/",component:g},{path:"/sketch/:sketchId",component:Bt,props:!0,children:[{path:"",name:"Overview",component:Wt},{path:"explore",name:"Explore",component:qt,props:!0}]}],Xt=new h["a"]({mode:"history",routes:Kt}),Zt=i("2f62");s["default"].use(Zt["a"]);var te=function(t){return{sketch:{},meta:{},searchHistory:{},tags:[],dataTypes:[],count:0,currentSearchNode:null,currentUser:t}},ee=te(),ie=new Zt["a"].Store({state:ee,mutations:{SET_SKETCH:function(t,e){s["default"].set(t,"sketch",e.objects[0]),s["default"].set(t,"meta",e.meta)},SET_SEARCH_HISTORY:function(t,e){s["default"].set(t,"searchHistory",e.objects)},SET_TIMELINE_TAGS:function(t,e){var i=e.objects[0]["field_bucket"]["buckets"];s["default"].set(t,"tags",i)},SET_DATA_TYPES:function(t,e){var i=e.objects[0]["field_bucket"]["buckets"];s["default"].set(t,"dataTypes",i)},SET_COUNT:function(t,e){s["default"].set(t,"count",e)},SET_SEARCH_NODE:function(t,e){s["default"].set(t,"currentSearchNode",e)},SET_SIGMA_LIST:function(t,e){s["default"].set(t,"sigmaRuleList",e["objects"]),s["default"].set(t,"sigmaRuleList_count",e["meta"]["rules_count"])},RESET_STATE:function(t,e){C.getLoggedInUser().then((function(e){var i=e.data.objects[0].username;Object.assign(t,te(i))}))}},actions:{updateSketch:function(t,e){return C.getSketch(e).then((function(i){t.commit("SET_SKETCH",i.data),t.dispatch("updateTimelineTags",e),t.dispatch("updateDataTypes",e)})).catch((function(t){}))},updateCount:function(t,e){return C.countSketchEvents(e).then((function(e){t.commit("SET_COUNT",e.data.meta.count)})).catch((function(t){}))},resetState:function(t){t.commit("RESET_STATE")},updateSearchNode:function(t,e){t.commit("SET_SEARCH_NODE",e)},updateSearchHistory:function(t,e){return e||(e=t.state.sketch.id),C.getSearchHistory(e).then((function(e){t.commit("SET_SEARCH_HISTORY",e.data)})).catch((function(t){}))},updateTimelineTags:function(t,e){if(t.state.sketch.active_timelines.length){var i={aggregator_name:"field_bucket",aggregator_parameters:{field:"tag"}};return C.runAggregator(e,i).then((function(e){t.commit("SET_TIMELINE_TAGS",e.data)})).catch((function(t){}))}},updateDataTypes:function(t,e){if(t.state.sketch.active_timelines.length){var i={aggregator_name:"field_bucket",aggregator_parameters:{field:"data_type"}};return C.runAggregator(e,i).then((function(e){t.commit("SET_DATA_TYPES",e.data)})).catch((function(t){}))}},updateSigmaList:function(t){C.getSigmaList().then((function(e){t.commit("SET_SIGMA_LIST",e.data)})).catch((function(t){}))}}}),se=i("f13c"),ne=i.n(se),re=i("8e5f"),ae=i.n(re),oe=i("3a6f"),ce=i.n(oe),le=i("4eb5"),ue=i.n(le),he=i("ce5b"),de=i.n(he);i("bf40");s["default"].use(de.a);var me={theme:{dark:!1}},ve=new de.a(me);i("b383"),i("2d27"),i("56eb");var fe=new s["default"],pe=e["default"]=fe;s["default"].use(i("2ead")),s["default"].use(ce.a),s["default"].use(ue.a),s["default"].use(ne.a),s["default"].component("multiselect",ae.a),s["default"].config.productionTip=!1,new s["default"]({router:Xt,store:ie,vuetify:ve,render:function(t){return t(u)}}).$mount("#app")},"56eb":function(t,e,i){"use strict";i.r(e);i("7f7f"),i("ac6a");var s=i("2b0e"),n=i("6dde");n.keys().forEach((function(t){var e=n(t);s["default"].filter(e.default.name,e.default.filter)}))},"5c64":function(t,e,i){"use strict";i("6ee5")},"6dde":function(t,e,i){var s={"./Capitalize.js":"76f9","./CompactBytes.js":"3d1d","./CompactNumber.js":"d3b7","./FilterChip.js":"05a2","./FormatLabelText.js":"16f1","./FormatTimestamp.js":"09ff","./ToISO8601.js":"84cc"};function n(t){var e=r(t);return i(e)}function r(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=r,t.exports=n,n.id="6dde"},"6ee5":function(t,e,i){},"707c":function(t,e,i){"use strict";var s=i("5a0c"),n=i.n(s),r=i("0ecf"),a=i.n(r);n.a.extend(a.a),e["a"]=n.a},"71d3":function(t,e,i){},"75a6":function(t,e){function i(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return[]},i.resolve=i,t.exports=i,i.id="75a6"},"76f9":function(t,e,i){"use strict";i.r(e);i("6b54");e["default"]={name:"capitalize",filter:function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""}}},"84cc":function(t,e,i){"use strict";i.r(e);var s=i("707c");e["default"]={name:"toISO8601",filter:function(t){return Object(s["a"])(t).toISOString()}}},"97be":function(t,e,i){},"9c2c":function(t,e,i){"use strict";i("d10a")},b383:function(t,e,i){},c4a3:function(t,e,i){"use strict";i("c74b")},c74b:function(t,e,i){},c7b3:function(t,e,i){},d10a:function(t,e,i){},d3b7:function(t,e,i){"use strict";i.r(e),e["default"]={name:"compactNumber",filter:function(t){t||(t=0);var e="";if(t>999999999)t=Math.round(t/1e9*10)/10,e="B";else if(t>999999)t=Math.round(t/1e6*10)/10,e="M";else{if(!(t>999))return t;t=Math.round(t/1e3*10)/10,e="K"}return t+e}}}}]);
//# sourceMappingURL=chunk-common.caa84f87.js.map