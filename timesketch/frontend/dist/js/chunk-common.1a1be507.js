(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(t,e,s){t.exports=s("56d7")},"03e4":function(t,e,s){},"0813":function(t,e,s){"use strict";var i=s("1d20"),a=s.n(i);a.a},1867:function(t,e,s){"use strict";var i=s("d316"),a=s.n(i);a.a},"1d20":function(t,e,s){},"2d27":function(t,e,s){"use strict";s.r(e);s("7f7f"),s("ac6a"),s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),a=s("75a6");a.keys().forEach(function(t){var e=a(t),s=e.default.name;i["a"].component(s,e.default||e)})},"3b78":function(t,e,s){"use strict";var i=s("7a96"),a=s.n(i);a.a},"40f1":function(t,e,s){"use strict";var i=s("d844"),a=s.n(i);a.a},"45dd":function(t,e,s){"use strict";var i=s("b73f"),a=s.n(i);a.a},"4e2e":function(t,e,s){"use strict";var i=s("9719"),a=s.n(i);a.a},"50fe":function(t,e,s){"use strict";var i=s("b6e3"),a=s.n(i);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("ts-navbar-main"),s("router-view")],1)},n=[],r={name:"app"},c=r,o=s("2877"),l=Object(o["a"])(c,a,n,!1,null,null,null),u=l.exports,d=s("8c4f"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("ts-navbar-secondary",[t.sketches?s("button",{staticClass:"button is-success is-rounded",on:{click:function(e){t.showSketchCreateModal=!t.showSketchCreateModal}}},[s("strong",[t._v("+ Sketch")])]):t._e()])],1)]),s("div",{staticClass:"modal",class:{"is-active":t.showSketchCreateModal}},[t._v(">\n    "),s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("ts-home-sketch-create-form")],1)])])]),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.showSketchCreateModal=!t.showSketchCreateModal}}})]),s("div",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[t.sketches?t._e():s("div",{staticClass:"has-text-centered"},[s("h1",{staticClass:"title"},[t._v("Welcome to Timesketch")]),s("button",{staticClass:"button is-success is-rounded",on:{click:function(e){t.showSketchCreateModal=!t.showSketchCreateModal}}},[s("strong",[t._v("Create sketch")])])]),s("ts-home-sketch-list",{attrs:{sketches:t.sketches}})],1)])])])])},h=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Create new sketch")])])}],v=s("bc3a"),p=s.n(v),f=p.a.create({baseURL:"/api/v1",headers:{common:{"X-CSRFToken":document.getElementsByTagName("meta")[0]["content"]}}}),g={getSketchList:function(){return f.get("/sketches/")},getSketch:function(t){return f.get("/sketches/"+t+"/")},createSketch:function(t){return f.post("/sketches/",t)},deleteSketch:function(t){return f.delete("/sketches/"+t+"/")},createSketchTimeline:function(t,e){var s={timeline:e};return f.post("/sketches/"+t+/timelines/,s)},saveSketchTimeline:function(t,e,s,i,a){var n={name:s,description:i,color:a};return f.post("/sketches/"+t+/timelines/+e+"/",n)},saveSketchSummary:function(t,e,s){var i={name:e,description:s};return f.post("/sketches/"+t+"/",i)},deleteSketchTimeline:function(t,e){return f.delete("/sketches/"+t+/timelines/+e+"/")},getSearchIndexList:function(){return f.get("/searchindices/")},getEvent:function(t,e,s){var i={params:{searchindex_id:e,event_id:s}};return f.get("/sketches/"+t+"/event/",i)},getStoryList:function(t){return f.get("sketches/"+t+"/stories/")},getStory:function(t,e){return f.get("/sketches/"+t+"/stories/"+e)},createStory:function(t,e,s){var i={title:t,content:e};return f.post("/sketches/"+s+/stories/,i)},updateStory:function(t,e,s,i){var a={title:t,content:e};return f.post("/sketches/"+s+/stories/+i+"/",a)},getView:function(t,e){return f.get("/sketches/"+t+"/views/"+e)},createView:function(t,e,s,i){var a={name:e,query:s,filter:i,dsl:""};return f.post("/sketches/"+t+/views/,a)},deleteView:function(t,e){return f.delete("/sketches/"+t+"/views/"+e+"/")},search:function(t,e){return f.post("/sketches/"+t+"/explore/",e)},runAggregator:function(t,e){return f.post("/sketches/"+t+"/aggregation/explore/",e)},countSketchEvents:function(t){return f.get("/sketches/"+t+"/count/")},uploadTimeline:function(t){var e={headers:{"Content-Type":"multipart/form-data"}};return f.post("/upload/",t,e)},getSessions:function(t,e){return f.get("/sketches/"+t+"/explore/sessions/"+e)}},_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"content-list"},t._l(t.sketches,function(e){return s("li",{key:e.id,staticStyle:{padding:"15px"}},[s("div",{staticClass:"is-pulled-right",staticStyle:{"margin-top":"10px"}},[s("span",{staticClass:"is-size-7"},[t._v(t._s(e.user.username))])]),s("div",[s("router-link",{attrs:{to:{name:"SketchOverview",params:{sketchId:e.id}}}},[s("strong",[t._v(t._s(e.name))])]),s("br"),s("span",{staticClass:"is-size-7"},[t._v("Last activity "+t._s(e.updated_at))])],1)])}),0)])},C=[],k={name:"ts-home-sketch-list",props:["sketches"]},b=k,y=(s("0813"),Object(o["a"])(b,_,C,!1,null,"06495753",null)),w=y.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Name")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"input",attrs:{type:"text",required:"",placeholder:"Name your sketch",autofocus:""},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Description (optional)")]),s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"textarea",attrs:{placeholder:"Describe your sketch"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})])]),t._m(0)])},x=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{staticClass:"button is-success",attrs:{type:"submit",value:"Save"}})])])}],$=(s("7f7f"),{name:"ts-home-sketch-create-form",data:function(){return{form:{name:"",description:""}}},methods:{clearFormData:function(){this.form.name="",this.form.description=""},submitForm:function(){var t=this,e={name:this.form.name,description:this.form.description};g.createSketch(e).then(function(e){var s=e.data.objects[0].id;t.clearFormData(),t.$router.push({name:"SketchOverview",params:{sketchId:s}})}).catch(function(t){})}}}),T=$,E=Object(o["a"])(T,S,x,!1,null,"cfbe1860",null),D=E.exports,M={name:"ts-home",components:{TsHomeSketchList:w,TsHomeSketchCreateForm:D},data:function(){return{showSketchCreateModal:!1,sketches:[]}},created:function(){var t=this;g.getSketchList().then(function(e){t.$store.commit("resetState"),t.sketches=e.data.objects[0]}).catch(function(t){console.error(t)})}},F=M,A=Object(o["a"])(F,m,h,!1,null,null,null),I=A.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view")},O=[],P={name:"ts-sketch",props:["sketchId"],created:function(){this.$store.commit("updateSketch",this.sketchId)}},L=P,j=Object(o["a"])(L,N,O,!1,null,null,null),Q=j.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[t.sketch.active_timelines.length?s("ts-navbar-secondary",{attrs:{currentAppContext:"sketch",currentPage:"overview"}},[s("a",{staticClass:"button is-info is-rounded",staticStyle:{"margin-right":"10px"}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-users"})]),s("span",[t._v("Share")])]),s("div",{staticClass:"dropdown is-hoverable is-right",class:{"is-active":t.settingsDropdownActive}},[s("div",{staticClass:"dropdown-trigger"},[s("a",{staticClass:"button",staticStyle:{background:"transparent",border:"none"},attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(e){t.settingsDropdownActive=!t.settingsDropdownActive}}},[s("span",[t._v("More")]),s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])])]),s("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[s("div",{staticClass:"dropdown-content"},[t.meta.permissions.delete?s("a",{staticClass:"dropdown-item",on:{click:function(e){t.showDeleteSketchModal=!t.showDeleteSketchModal}}},[s("span",{staticClass:"icon is-small",staticStyle:{"margin-right":"5px"}},[s("i",{staticClass:"fas fa-trash"})]),s("span",[t._v("Delete")])]):t._e()])])])]):t._e()],1)]),s("div",{staticClass:"modal",class:{"is-active":t.showUploadTimelineModal}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[t._m(1),s("ts-upload-timeline-form",{on:{toggleModal:function(e){t.showUploadTimelineModal=!t.showUploadTimelineModal}}})],1)])])]),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.showUploadTimelineModal=!t.showUploadTimelineModal}}})]),s("div",{staticClass:"modal",class:{"is-active":t.showDeleteSketchModal}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"card"},[t._m(2),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("p",[t._v("Are you sure you want to delete this sketch?")]),s("div",{staticClass:"field is-grouped"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-danger",on:{click:t.deleteSketch}},[t._m(3),s("span",[t._v("Delete")])])]),s("p",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:function(e){t.showDeleteSketchModal=!t.showDeleteSketchModal}}},[s("span",[t._v("I changed my mind, keep the sketch!")])])])])])])])]),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.showDeleteSketchModal=!t.showDeleteSketchModal}}})]),s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card",staticStyle:{"min-height":"200px"}},[s("div",{staticClass:"card-content"},[s("ts-sketch-summary",{attrs:{sketch:t.sketch}})],1)])])]),t.sketch.timelines.length?s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card",staticStyle:{"min-height":"100px"}},[s("div",{staticClass:"card-content"},[s("ts-sketch-metrics",{attrs:{timelines:t.sketch.active_timelines,views:t.meta.views,stories:t.sketch.stories,count:t.count}})],1)])])]):t._e(),t.sketch.timelines&&t.sketch.timelines.length&&t.sketch.timelines.length?s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"columns"},[t.sketch.timelines&&t.sketch.timelines.length&&t.sketch.timelines.length?s("div",{staticClass:"column"},[s("div",{staticClass:"card has-min-height"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Timelines")]),s("div",{staticClass:"field is-grouped is-pulled-right",staticStyle:{padding:"0.75rem"}},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-success is-rounded is-small",on:{click:function(e){t.showUploadTimelineModal=!t.showUploadTimelineModal}}},[t._m(4),s("span",[t._v("Timeline")])])]),s("p",{staticClass:"control"},[s("router-link",{staticClass:"button is-rounded is-small",attrs:{to:{name:"SketchTimelines"}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-cog"})]),s("span",[t._v("Manage")])])],1)])]),s("div",{staticClass:"card-content",staticStyle:{padding:"5px"}},[s("ts-timeline-list",{attrs:{timelines:t.sketch.timelines,controls:!1}})],1)])]):t._e(),t.meta.views&&t.meta.views.length&&t.meta.views.length?s("div",{staticClass:"column"},[s("div",{staticClass:"card has-min-height"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Views")]),s("div",{staticClass:"field is-grouped is-pulled-right",staticStyle:{padding:"0.75rem"}},[s("p",{staticClass:"control"},[s("router-link",{staticClass:"button is-rounded is-small",attrs:{to:{name:"SketchViews"}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-cog"})]),s("span",[t._v("Manage")])])],1)])]),s("div",{staticClass:"card-content",staticStyle:{padding:"5px"}},[s("ts-saved-view-list",{attrs:{views:t.meta.views}})],1)])]):t._e(),t.sketch.stories&&t.sketch.stories.length&&t.sketch.stories.length?s("div",{staticClass:"column"},[s("div",{staticClass:"card has-min-height"},[t._m(5),s("div",{staticClass:"card-content",staticStyle:{padding:"5px"}},[s("ts-sketch-story-list")],1)])]):t._e()])])]):t._e(),t.sketch.timelines.length?t._e():s("ts-sketch-timelines-manage")],1)},R=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Upload new timeline")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n              Supported formats are Plaso storage file, JSONL, or a CSV file.\n              If you are uploading a CSV or JSONL file make sure to read the "),s("a",{attrs:{href:"https://github.com/google/timesketch/blob/master/docs/Users-Guide.md#adding-timelines",rel:"noreferrer",target:"_blank"}},[t._v("documentation")]),t._v(" to learn what columns are needed.\n            ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Delete sketch")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small",staticStyle:{"margin-right":"5px"}},[s("i",{staticClass:"fas fa-trash"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-plus"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Stories")])])}],q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"title is-4",attrs:{contenteditable:t.meta.permissions.write},domProps:{textContent:t._s(t.sketch.name)},on:{blur:t.onEditTitle,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.onEditTitle(e))}}}),s("p",{attrs:{contenteditable:t.meta.permissions.write},domProps:{textContent:t._s(t.sketch.description)},on:{blur:t.onEditDescription,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.onEditDescription(e))}}})])},Y=[],H={name:"ts-sketch-overview-summary",computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}},methods:{onEditTitle:function(t){this.sketch.name=t.target.innerText,this.saveSketchSummary()},onEditDescription:function(t){this.sketch.description=t.target.innerText,this.saveSketchSummary()},saveSketchSummary:function(){g.saveSketchSummary(this.sketch.id,this.sketch.name,this.sketch.description).then(function(t){}).catch(function(t){console.error(t)})}}},U=H,z=Object(o["a"])(U,q,Y,!1,null,"54396e98",null),J=z.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"level"},[s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[t._v("Timelines")]),s("p",{staticClass:"title"},[t._v(t._s(t.timelines&&t.timelines.length?t.timelines.length:0))])])]),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[t._v("Views")]),s("p",{staticClass:"title"},[t._v(t._s(t.views&&t.views.length?t.views.length:0))])])]),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[t._v("Stories")]),s("p",{staticClass:"title"},[t._v(t._s(t.views&&t.stories.length?t.stories.length:0))])])]),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[t._v("Events")]),s("p",{staticClass:"title"},[t._v(t._s(t._f("compactNumber")(t.count)))])])])])},W=[],G={name:"ts-sketch-overview-metrics",props:["timelines","views","stories","count"]},K=G,X=Object(o["a"])(K,B,W,!1,null,"230e14d2",null),Z=X.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"content-list"},[s("transition-group",{attrs:{name:"list",tag:"p"}},t._l(t.timelines,function(e){return s("li",{key:e.id,staticStyle:{padding:"10px"}},[s("ts-timeline-list-item",{attrs:{timeline:e,controls:t.controls},on:{remove:function(s){return t.remove(e)},save:function(s){return t.save(e)}}})],1)}),0)],1)},et=[],st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"modal",class:{"is-active":t.showInfoModal}},[t._v(">\n    "),s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Detailed information for "+t._s(t.timeline.name))])]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("ul",[s("li",[t._v("Elasticsearch index: "+t._s(t.timeline.searchindex.index_name))]),s("li",[t._v("Original name: "+t._s(t.timeline.searchindex.name))]),s("li",[t._v("Added by: "+t._s(t.timeline.searchindex.user.username))]),s("li",[t._v("Added: "+t._s(t._f("moment")(t.timeline.searchindex.created_at,"YYYY-MM-DD HH:mm")))])]),t.timeline.description?s("strong",[t._v("Description")]):t._e(),s("p",[t._v(t._s(t.timeline.description))])])])])]),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.showInfoModal=!t.showInfoModal}}})]),s("div",{staticClass:"modal",class:{"is-active":t.showEditModal}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.saveTimeline(e)}}},[s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.timeline.name,expression:"timeline.name"}],staticClass:"input",attrs:{type:"text",required:"",autofocus:""},domProps:{value:t.timeline.name},on:{input:function(e){e.target.composing||t.$set(t.timeline,"name",e.target.value)}}})])]),t._m(1)])])])])]),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.showEditModal=!t.showEditModal}}})]),s("div",{staticClass:"dropdown is-pulled-left",class:{"is-active":t.colorPickerActive}},[s("div",{staticClass:"dropdown-trigger"},[s("div",{staticClass:"ts-timeline-color-box",style:t.timelineColorStyle,on:{click:function(e){t.colorPickerActive=!t.colorPickerActive}}})]),s("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[s("div",{staticClass:"dropdown-content",staticStyle:{padding:"0"}},[s("div",{staticClass:"dropdown-item",staticStyle:{padding:"0"}},[s("color-picker",{on:{input:t.updateColor},model:{value:t.initialColor,callback:function(e){t.initialColor=e},expression:"initialColor"}})],1)])])]),t.controls?s("div",{staticClass:"field is-grouped is-pulled-right",staticStyle:{"margin-top":"10px"}},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-rounded is-small is-outlined",on:{click:function(e){t.showInfoModal=!t.showInfoModal}}},[t._m(2),s("span",[t._v("Info")])])]),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-rounded is-small is-outlined",on:{click:function(e){t.showEditModal=!t.showEditModal}}},[t._m(3),s("span",[t._v("Rename")])])]),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-small is-rounded is-danger is-outlined",on:{click:function(e){return t.remove(t.timeline)}}},[t._v("Remove")])])]):t._e(),s("router-link",{attrs:{to:{name:"SketchExplore",query:{index:t.timeline.searchindex.index_name}}}},[s("strong",[t._v(t._s(t.timeline.name))])]),s("br"),s("span",{staticClass:"is-size-7"},[t._v("\n    Added "+t._s(t._f("moment")(t.timeline.updated_at,"YYYY-MM-DD HH:mm"))+"\n  ")])],1)},it=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Rename timeline")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{staticClass:"button is-success",attrs:{type:"submit",value:"Save"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-info-circle"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-edit"})])}],at=(s("f559"),s("c345")),nt=s("2ef0"),rt=s.n(nt),ct={name:"ts-sketch-timeline-list-item",components:{"color-picker":at["Chrome"]},props:["timeline","controls"],data:function(){return{initialColor:{},newColor:"",newTimelineName:"",colorPickerActive:!1,showInfoModal:!1,showEditModal:!1}},computed:{timelineColorStyle:function(){var t=this.newColor||this.timeline.color;return t.startsWith("#")||(t="#"+t),{"background-color":t}}},methods:{remove:function(t){this.$emit("remove",t)},updateColor:rt.a.debounce(function(t){this.newColor=t.hex,this.newColor.startsWith("#")&&(this.newColor=this.newColor.substring(1)),i["a"].set(this.timeline,"color",this.newColor),this.$emit("save",this.timeline)},300),saveTimeline:function(){this.showEditModal=!1,this.$emit("save",this.timeline)}},mounted:function(){var t=this;window.addEventListener("click",function(e){t.$el.contains(e.target)||(t.colorPickerActive=!1)})},created:function(){this.initialColor={hex:this.timeline.color}}},ot=ct,lt=(s("1867"),Object(o["a"])(ot,st,it,!1,null,"3d31ad1a",null)),ut=lt.exports,dt={name:"ts-sketch-overview-timeline-list",components:{TsTimelineListItem:ut},props:["timelines","controls"],computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}},methods:{remove:function(t){var e=this;g.deleteSketchTimeline(this.sketch.id,t.id).then(function(s){e.$emit("remove-timeline",t),e.$store.commit("updateSketch",e.sketch.id)}).catch(function(t){console.error(t)})},save:function(t){var e=this;g.saveSketchTimeline(this.sketch.id,t.id,t.name,t.description,t.color).then(function(t){e.$store.commit("updateSketch",e.sketch.id)}).catch(function(t){console.error(t)})}}},mt=dt,ht=Object(o["a"])(mt,tt,et,!1,null,"d9e80d04",null),vt=ht.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"content-list"},t._l(t.views,function(e,i){return s("li",{key:e.id,staticStyle:{padding:"10px","border-bottom":"none"}},[s("router-link",{attrs:{to:{name:"SketchExplore",query:{view:e.id}}}},[s("strong",[t._v(t._s(e.name))])]),s("br"),t.controls?t._e():s("span",{staticClass:"is-size-7"},[t._v("\n        Created "+t._s(t._f("moment")(e.created_at,"YYYY-MM-DD HH:mm"))+"\n      ")]),t.controls?s("span",{staticClass:"is-size-7"},[s("b",[t._v("Query:")]),t._v(" "+t._s(e.query)+"\n      ")]):t._e(),t.controls?s("div",{staticClass:"field is-grouped is-pulled-right",staticStyle:{"margin-top":"-15px"}},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-small is-rounded is-danger is-outlined",on:{click:function(s){return t.remove(e,i)}}},[t._v("Remove")])])]):t._e()],1)}),0)])},ft=[],gt={name:"ts-sketch-overview-view-list",props:["views","controls"],computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}},methods:{remove:function(t,e){i["a"].delete(this.views,e),g.deleteView(this.sketch.id,t.id).then(function(t){}).catch(function(t){console.error(t)})}}},_t=gt,Ct=Object(o["a"])(_t,pt,ft,!1,null,"d76121e8",null),kt=Ct.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"content-list"},t._l(t.sketch.stories,function(e){return s("li",{key:e.id,staticStyle:{padding:"10px","border-bottom":"none"}},[s("div",[s("router-link",{attrs:{to:{name:"SketchStoryContent",params:{sketchId:t.sketch.id,storyId:e.id}}}},[s("strong",[t._v(t._s(e.title))])]),s("br"),s("span",{staticClass:"is-size-7"},[t._v("Last activity "+t._s(t._f("moment")(e.updated_at,"YYYY-MM-DD HH:mm")))])],1)])}),0)])},yt=[],wt={name:"ts-home-sketch-list",data:function(){return{stories:[]}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}}},St=wt,xt=(s("3b78"),Object(o["a"])(St,bt,yt,!1,null,"22573b81",null)),$t=xt.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[s("div",{staticClass:"field"},[s("div",{staticClass:"file has-name"},[s("label",{staticClass:"file-label"},[s("input",{staticClass:"file-input",attrs:{type:"file",name:"resume"},on:{change:function(e){return t.setFileName(e.target.files)}}}),t._m(0),t.fileName?s("span",{staticClass:"file-name"},[t.fileName?t._e():s("span",[t._v("No file selected")]),t._v("\n          "+t._s(t.fileName)+"\n        ")]):t._e()])])]),t.fileName?s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Name")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"input",attrs:{type:"text",required:"",placeholder:"Name your timeline (optional)"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})])]):t._e(),t.fileName?s("div",{staticClass:"field"},[t._m(1)]):t._e()])},Et=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"file-cta"},[s("span",{staticClass:"file-icon"},[s("i",{staticClass:"fas fa-upload"})]),s("span",{staticClass:"file-label"},[t._v("\n            Choose a file…\n          ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"control"},[s("input",{staticClass:"button is-success",attrs:{type:"submit",value:"Upload"}})])}],Dt=(s("28a5"),{name:"ts-sketch-upload-timeline-form",data:function(){return{form:{name:"",file:""},fileName:""}},methods:{clearFormData:function(){this.form.name="",this.form.file=""},submitForm:function(){var t=this,e=new FormData;e.append("file",this.form.file),e.append("name",this.form.name),e.append("sketch_id",this.$store.state.sketch.id),g.uploadTimeline(e).then(function(e){t.$store.dispatch("updateSketch",t.$store.state.sketch.id),t.$emit("toggleModal"),t.clearFormData()}).catch(function(t){})},setFileName:function(t){var e=t[0].name;this.form.file=t[0],this.form.name=e.split(".").slice(0,-1).join("."),this.fileName=e}}}),Mt=Dt,Ft=Object(o["a"])(Mt,Tt,Et,!1,null,"0189da7c",null),At=Ft.exports,It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.sketch.timelines.length?s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card",staticStyle:{"min-height":"160px"}},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Active Timelines")]),s("p",{staticClass:"is-pulled-right",staticStyle:{padding:"0.75rem","font-weight":"bold",color:"#777777"}},[t._v(t._s(t._f("compactNumber")(t.count))+" events")])]),s("div",{staticClass:"card-content"},[s("ts-timeline-list",{attrs:{timelines:t.sketch.timelines,controls:!0},on:{"remove-timeline":t.makeTimelineAvailable}})],1)])])]):t._e(),s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card",staticStyle:{"min-height":"160px"}},[t._m(0),s("div",{staticClass:"card-content",staticStyle:{"background-color":"rgba(44,255,0,0.08)"}},[t._m(1),s("br"),s("ts-upload-timeline-form")],1),t.availableSearchIndices.length?s("div",{staticClass:"card-content"},[s("ul",{staticClass:"content-list"},[s("transition-group",{attrs:{name:"list",tag:"p"}},t._l(t.availableSearchIndices,function(e){return s("li",{key:e.id,staticStyle:{padding:"10px"}},[s("div",{staticClass:"ts-timeline-color-box is-pulled-left has-text-centered",staticStyle:{"background-color":"#f5f5f5",cursor:"pointer"},on:{click:function(s){return t.addTimelineToSketch(e)}}},[s("span",{staticClass:"icon",staticStyle:{"margin-top":"10px",color:"#d1d1d1"}},[s("i",{staticClass:"fas fa-plus"})])]),s("div",{staticClass:"is-pulled-right",staticStyle:{"margin-top":"10px"}},[s("button",{staticClass:"button is-small is-rounded is-success is-outlined",on:{click:function(s){return t.addTimelineToSketch(e)}}},[t._v("Add")])]),s("strong",[t._v(t._s(e.name))]),s("br"),s("span",{staticClass:"is-size-7"},[t._v("\n                    Created "+t._s(t._f("moment")(e.updated_at,"YYYY-MM-DD HH:mm"))+"\n                  ")])])}),0)],1)]):t._e(),t.availableSearchIndices.length?t._e():s("div",{staticClass:"card-content"},[s("p",{staticStyle:{color:"#777","font-weight":"bold"}},[t._v("No timelines available")])])])])])])},Nt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Add Timelines")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n            Upload a new timeline or choose an existing one from the list below. You can upload either a Plaso storage file, JSONL, or a CSV file.\n            "),s("br"),t._v("\n            If you are uploading a CSV or JSONL file make sure to read the "),s("a",{attrs:{href:"https://github.com/google/timesketch/blob/master/docs/Users-Guide.md#adding-timelines",rel:"noreferrer",target:"_blank"}},[t._v("documentation")]),t._v(" to learn what columns are needed.\n          ")])}],Ot=(s("6762"),s("2fdb"),s("ac6a"),{name:"ts-sketch-overview",components:{TsTimelineList:vt,TsUploadTimelineForm:At},data:function(){return{availableSearchIndices:[]}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},count:function(){return this.$store.state.count}},methods:{addTimelineToSketch:function(t){var e=this;g.createSketchTimeline(this.sketch.id,t.id).then(function(s){var i=e.availableSearchIndices.indexOf(t);e.availableSearchIndices.splice(i,1),e.$store.commit("updateSketch",e.sketch.id)}).catch(function(t){console.error(t)})},makeTimelineAvailable:function(t){this.availableSearchIndices.unshift(t.searchindex)}},created:function(){var t=this;g.getSearchIndexList().then(function(e){var s=e.data.objects[0],i=t.$store.state.sketch.timelines.map(function(t){return t.searchindex.index_name});s.forEach(function(t){i.includes(t.index_name)||"ready"===t.status[0].status&&this.push(t)},t.availableSearchIndices)}).catch(function(t){console.error(t)})}}),Pt=Ot,Lt=(s("c21b"),Object(o["a"])(Pt,It,Nt,!1,null,null,null)),jt=Lt.exports,Qt={name:"ts-sketch-overview",components:{TsSketchMetrics:Z,TsSketchSummary:J,TsTimelineList:vt,TsSavedViewList:kt,TsUploadTimelineForm:At,TsSketchStoryList:$t,TsSketchTimelinesManage:jt},data:function(){return{settingsDropdownActive:!1,showUploadTimelineModal:!1,showDeleteSketchModal:!1}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},count:function(){return this.$store.state.count}},methods:{deleteSketch:function(){var t=this;g.deleteSketch(this.sketch.id).then(function(e){t.$router.push({name:"Home"})}).catch(function(t){console.error(t)})}}},Vt=Qt,Rt=(s("45dd"),Object(o["a"])(Vt,V,R,!1,null,null,null)),qt=Rt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("ts-navbar-secondary",{attrs:{currentAppContext:"sketch",currentPage:"explore"}})],1)]),s("router-view")],1)},Ht=[],Ut={name:"ts-sketch-explore",props:["sketchId"]},zt=Ut,Jt=Object(o["a"])(zt,Yt,Ht,!1,null,null,null),Bt=Jt.exports,Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentQueryString,expression:"currentQueryString"}],staticClass:"ts-search-input",attrs:{type:"text",placeholder:"Search",autofocus:""},domProps:{value:t.currentQueryString},on:{input:function(e){e.target.composing||(t.currentQueryString=e.target.value)}}})]),s("br"),s("div",{staticClass:"modal",class:{"is-active":t.showCreateViewModal}},[t._v(">\n            "),s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("ts-create-view-form",{attrs:{sketchId:t.sketchId,currentQueryString:t.currentQueryString,currentQueryFilter:t.currentQueryFilter},on:{toggleCreateViewModal:t.toggleCreateViewModal}})],1)])])]),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.showCreateViewModal=!t.showCreateViewModal}}})]),s("div",{staticClass:"field is-grouped"},[s("p",{staticClass:"control"},[s("ts-view-list-dropdown",{on:{setActiveView:t.searchView}})],1),s("p",{staticClass:"control"},[s("a",{staticClass:"button",on:{click:function(e){t.showCreateViewModal=!t.showCreateViewModal}}},[t._m(1),s("span",[t._v("Save view")])])])])])])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header",staticStyle:{cursor:"pointer"},on:{click:function(e){t.showFilters=!t.showFilters}}},[t._m(2),s("span",{staticClass:"card-header-icon"},[s("span",{staticClass:"icon"},[t.showFilters?t._e():s("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}}),t.showFilters?s("i",{staticClass:"fas fa-angle-up",attrs:{"aria-hidden":"true"}}):t._e()])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showFilters,expression:"showFilters"}],staticClass:"card-content"},[s("ts-explore-filter-time"),s("br"),t._m(3),t.sketch.active_timelines?s("ts-explore-timeline-picker",{on:{doSearch:t.search}}):t._e()],1)])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header",staticStyle:{cursor:"pointer"},on:{click:function(e){t.showAggregations=!t.showAggregations}}},[t._m(4),s("span",{staticClass:"card-header-icon"},[s("span",{staticClass:"icon"},[t.showAggregations?t._e():s("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}}),t.showAggregations?s("i",{staticClass:"fas fa-angle-up",attrs:{"aria-hidden":"true"}}):t._e()])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAggregations,expression:"showAggregations"}],staticClass:"card-content"},[s("ts-sketch-explore-aggregation")],1)])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[t.searchInProgress?t._e():s("div",[t._v(t._s(t.totalHits)+" events ("+t._s(t.totalTime)+"s)")]),t.searchInProgress?s("div",[t._m(5),t._v(" Searching..")]):t._e(),t.totalHits>0?s("div",{staticStyle:{"margin-top":"20px"}}):t._e(),s("ts-sketch-explore-event-list")],1)])])])])},Gt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Create new view")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-save"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"card-header-title"},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-filter"})]),s("span",{staticStyle:{"margin-left":"10px"}},[t._v("Filters")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"margin-bottom":"8px"}},[s("b",[t._v("Timelines")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"card-header-title"},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-th"})]),s("span",{staticStyle:{"margin-left":"10px"}},[t._v("Aggregations")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-circle-notch fa-pulse"})])}],Kt=(s("386d"),s("e814")),Xt=s.n(Kt),Zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dropdown",class:{"is-active":t.viewListDropdownActive}},[s("div",{staticClass:"dropdown-trigger"},[s("a",{staticClass:"button",class:{"is-rounded":t.isRounded},attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(e){t.viewListDropdownActive=!t.viewListDropdownActive}}},[s("span",[t._v(t._s(t.title||"Saved views"))]),t._m(0)])]),s("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[s("div",{staticClass:"dropdown-content"},[t.meta.views.length?t._e():s("span",{staticClass:"dropdown-item"},[s("strong",[t._v("No saved views")])]),t._l(t.meta.views,function(e){return s("a",{key:e.id,staticClass:"dropdown-item",on:{click:function(s){return t.setActiveView(e)}}},[s("span",[t._v(t._s(e.name))])])})],2)])])},te=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])}],ee={name:"ts-sketch-explore-view-list-dropdown",props:["isRounded","title"],data:function(){return{viewListDropdownActive:!1}},methods:{setActiveView:function(t){this.$emit("setActiveView",t),this.viewListDropdownActive=!1}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}}},se=ee,ie=Object(o["a"])(se,Zt,te,!1,null,"d8931afc",null),ae=ie.exports,ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Name")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.viewName,expression:"viewName"}],staticClass:"input",attrs:{type:"text",required:"",placeholder:"Name your view",autofocus:""},domProps:{value:t.viewName},on:{input:function(e){e.target.composing||(t.viewName=e.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{staticClass:"button is-success",attrs:{type:"submit",value:"Save"},on:{click:t.toggleCreateViewModal}})])])])},re=[],ce={name:"ts-home-sketch-create-form",props:["sketchId","currentQueryString","currentQueryFilter"],data:function(){return{viewName:""}},methods:{clearFormData:function(){this.viewName=""},submitForm:function(){var t=this;g.createView(this.sketchId,this.viewName,this.currentQueryString,this.currentQueryFilter).then(function(e){var s=e.data.objects[0];t.$store.state.meta.views.push(s),t.clearFormData(),t.$router.push({name:"SketchExplore",query:{view:s.id}})}).catch(function(t){})},toggleCreateViewModal:function(){this.$emit("toggleCreateViewModal")}}},oe=ce,le=Object(o["a"])(oe,ne,re,!1,null,"3583f47e",null),ue=le.exports,de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.eventList.objects,function(e,i){return s("ts-sketch-explore-event-list-item",{key:e._id,attrs:{event:e,prevEvent:t.eventList.objects[i-1]}})}),1)},me=[],he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.deltaDays>0?s("div",[s("div",{staticClass:"time-bubble-vertical-line"}),s("div",{staticClass:"time-bubble"},[s("h5",[s("b",[t._v(t._s(t.deltaDays))]),s("br"),t._v("days")])]),s("div",{staticClass:"time-bubble-vertical-line"})]):t._e(),s("table",{staticClass:"ts-event-list-table"},[s("tbody",[s("tr",[s("td",{staticClass:"ts-event-table-column",staticStyle:{width:"215px"},style:t.timelineColor},[t._v("\n          "+t._s(t.event._source.datetime)+"\n        ")]),s("td",{staticClass:"ts-event-table-column ts-event-message-column",staticStyle:{width:"100%"},on:{click:function(e){t.showDetail=!t.showDetail}}},[s("span",{staticClass:"ts-event-message-container"},[s("span",{staticClass:"ts-event-message-ellipsis",attrs:{title:t.event._source.message}},[t._l(t.event._source.__ts_emojis,function(e){return s("span",{key:e,domProps:{innerHTML:t._s(e)}},[t._v(t._s(e))])}),t._v("\n              "+t._s(t.event._source.message)+"\n            ")],2)])]),s("td",{staticClass:"ts-event-table-column ts-timeline-name-column",staticStyle:{width:"150px"}},[t._v("\n          "+t._s(t.timelineName)+"\n        ")])])])]),t.showDetail?s("div",[s("div",{staticStyle:{margin:"10px 0 10px 0",background:"#f9f9f9",border:"none","border-radius":"5px",padding:"15px"}},[s("ts-sketch-explore-event-list-item-detail",{attrs:{event:t.event}})],1)]):t._e()])},ve=[],pe=(s("7514"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-parent"},[s("div",{staticClass:"tile is-child card"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"table-container"},[s("table",{staticClass:"table is-bordered",staticStyle:{width:"100%","table-layout":"fixed"}},[s("tbody",t._l(t.fullEventFiltered,function(e,i){return s("tr",{key:i},[s("td",{staticStyle:{width:"150px"}},[t._v(t._s(i))]),s("td",[s("span",{staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word"}},[t._v(t._s(e))])])])}),0)])])])])]),t._m(0)])}),fe=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tile is-parent is-4"},[s("div",{staticClass:"tile is-child card"},[s("div",{staticClass:"card-content"},[t._v("\n        Comment\n      ")])])])}],ge=s("03cc"),_e=s.n(ge),Ce={name:"ts-explore-event-list-item-detail",props:["event"],computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},fullEventFiltered:function(){var t=this;return _e()(this.fullEvent).forEach(function(e){e.startsWith("__ts")&&delete t.fullEvent[e]}),this.fullEvent}},data:function(){return{fullEvent:{}}},methods:{getEvent:function(){var t=this,e=this.event._index,s=this.event._id;g.getEvent(this.sketch.id,e,s).then(function(e){t.fullEvent=e.data.objects}).catch(function(t){})}},created:function(){this.getEvent()}},ke=Ce,be=Object(o["a"])(ke,pe,fe,!1,null,null,null),ye=be.exports,we={name:"ts-sketch-explore-event-list-item",props:["event","prevEvent"],components:{TsSketchExploreEventListItemDetail:ye},data:function(){return{showDetail:!1}},methods:{timeline:function(t){return this.sketch.timelines.find(function(e){return e.searchindex.index_name===t})}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},timelineColor:function(){var t=this.timeline(this.event._index).color;return t.startsWith("#")||(t="#"+t),{"background-color":t}},timelineName:function(){return this.timeline(this.event._index).name},deltaDays:function(){if(!this.prevEvent)return 0;var t=Math.floor(this.event._source.timestamp/1e6),e=Math.floor(this.prevEvent._source.timestamp/1e6),s=Math.floor(t-e),i=s/60/60/24;return Math.floor(i)}}},Se=we,xe=(s("40f1"),Object(o["a"])(Se,he,ve,!1,null,null,null)),$e=xe.exports,Te={name:"ts-sketch-explore-event-list",components:{TsSketchExploreEventListItem:$e},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},eventList:function(){return this.$store.state.eventList}}},Ee=Te,De=Object(o["a"])(Ee,de,me,!1,null,null,null),Me=De.exports,Fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tags"},t._l(t.sketch.active_timelines,function(e){return s("span",{key:e.id,staticClass:"tag is-medium",staticStyle:{cursor:"pointer"},style:t.timelineColor(e),on:{click:function(s){return t.updateFilter(e)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])}),0)},Ae=[],Ie={name:"ts-sketch-explore-timeline-picker",computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},currentQueryFilter:{get:function(){return this.$store.state.currentQueryFilter},set:function(t){this.$store.commit("updateCurrentQueryFilter",t)}}},methods:{toggleIndex:function(t){var e=this.currentQueryFilter.indices.slice(),s=e.indexOf(t);return-1===s?e.push(t):e.splice(s,1),e},enableAllIndices:function(){var t=[];this.sketch.active_timelines.forEach(function(e){t.push(e.searchindex.index_name)}),this.currentQueryFilter.indices=t},updateFilter:function(t){var e=t.searchindex.index_name;this.currentQueryFilter.indices=this.toggleIndex(e),this.$store.commit("search",this.sketch.id)},timelineColor:function(t){var e=t.searchindex.index_name,s=t.color;return s.startsWith("#")||(s="#"+s),this.currentQueryFilter.indices.includes(e)||(s="#f5f5f5"),{"background-color":s}}},created:function(){this.currentQueryFilter.indices.includes("_all")&&this.enableAllIndices()}},Ne=Ie,Oe=Object(o["a"])(Ne,Fe,Ae,!1,null,null,null),Pe=Oe.exports,Le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticStyle:{"max-width":"500px"},on:{submit:function(e){return e.preventDefault(),t.formatDateTime(e)}}},[t._m(0),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.startDateTime,expression:"startDateTime"}],staticClass:"input",attrs:{type:"text",placeholder:"2019-07-07T10:00:01"},domProps:{value:t.startDateTime},on:{input:function(e){e.target.composing||(t.startDateTime=e.target.value)}}})])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.endDateTime,expression:"endDateTime"}],staticClass:"input",attrs:{type:"text",placeholder:"2019-07-07T10:00:01"},domProps:{value:t.endDateTime},on:{input:function(e){e.target.composing||(t.endDateTime=e.target.value)}}})])])])]),s("button",{staticClass:"button"},[t._v("Filtered search")])])},je=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"margin-bottom":"8px"}},[s("b",[t._v("Time range")])])}],Qe={name:"ts-sketch-explore-filter-time",data:function(){return{startDateTime:"",endDateTime:""}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},currentQueryFilter:{get:function(){return this.$store.state.currentQueryFilter},set:function(t){this.$store.commit("updateCurrentQueryFilter",t)}}},methods:{formatDateTime:function(){var t=this.startDateTime,e=this.endDateTime,s="YYYY-MM-DDTHH:mm:ss";if(null!=t&&""!==t){var i=/(.*?)(-|\+|\+-|-\+)(\d+)(y|d|h|m|s|M|Q|w|ms)/g,a=i.exec(t);if(null!=a){var n=this.$moment.utc(a[1]),r=a[2],c=a[3],o=a[4]||"m";return"+"===r&&(this.currentQueryFilter.time_start=n.format(s),this.currentQueryFilter.time_end=n.add(c,o).format(s)),"-"===r&&(this.currentQueryFilter.time_start=n.subtract(c,o).format(s),this.currentQueryFilter.time_end=n.format(s)),"-+"!==r&&"+-"!==r||(this.currentQueryFilter.time_start=n.subtract(c,o).format(s),this.currentQueryFilter.time_end=n.add(c,o).format(s)),this.startDateTime=this.currentQueryFilter.time_start,void(this.endDateTime=this.currentQueryFilter.time_end)}e||(e=t);var l=this.$moment.utc(t),u=this.$moment.utc(e);this.currentQueryFilter.time_start=l.format(s),this.currentQueryFilter.time_end=u.format(s),this.startDateTime=this.currentQueryFilter.time_start,this.endDateTime=this.currentQueryFilter.time_end,this.$store.commit("search",this.sketch.id)}}}},Ve=Qe,Re=Object(o["a"])(Ve,Le,je,!1,null,null,null),qe=Re.exports,Ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["{}"===this.spec&&!0===this.showChart?s("div",[t._m(0),t._v(" Loading..")]):t._e(),t.isTruncated&&t.showChart?s("p",[t._v("Warning: only retrieved 100 sessions for each session type.")]):t._e(),s("ts-vega-lite-chart",{attrs:{vegaSpec:t.spec},on:{viewCreated:t.registerClickListener}}),s("div",{staticClass:"field"},[s("button",{staticClass:"button",attrs:{disabled:t.indices.length>1},on:{click:t.toggleChart}},[t._v(t._s(t.message))])]),t.showChart?s("div",{staticClass:"field"},[this.showTimeRange?t._e():s("p",[t._v("\n             Showing sessions within the last year of the timeline by default. "),s("u",[s("em",{on:{click:t.toggleTimeRange}},[t._v("Choose a different timeframe.")])])]),this.showTimeRange?s("div",{staticClass:"control"},[t._m(1),s("input",{staticClass:"input",attrs:{type:"text",name:"start_time_range_input",placeholder:"mm/dd/yyyy"},on:{change:t.updateTimeRange}}),t._m(2),s("input",{staticClass:"input",attrs:{type:"text",name:"end_time_range_input",placeholder:"mm/dd/yyyy"},on:{change:t.updateTimeRange}})]):t._e(),s("p",[t._v(t._s(t.timeRangeMessage))])]):t._e(),t.showChart?s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Type of Session:")]),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedType,expression:"selectedType"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedType=e.target.multiple?s:s[0]},t.selectSessionType]}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),t._l(t.sessionTypes,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)])])]):t._e(),t.selectedSessions.length>0?s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Session ID:")]),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedID,expression:"selectedID"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedID=e.target.multiple?s:s[0]},t.selectSessionID]}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),t._l(t.selectedSessions,function(e){return s("option",{key:e.session_type+e.session_id,domProps:{value:e.session_id}},[t._v(t._s(e.session_id))])})],2)])])]):t._e()],1)},He=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-circle-notch fa-pulse"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"label"},[s("em",[t._v("Start date:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"label"},[s("em",[t._v("End date:")])])}],Ue=s("f499"),ze=s.n(Ue),Je=s("0a0d"),Be=s.n(Je),We=s("b6d0"),Ge=s.n(We),Ke=s("75fc"),Xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"vega"}})},Ze=[],ts=s("7ad3"),es={name:"vega-lite-chart",props:["vegaSpec"],components:{},watch:{vegaSpec:function(t,e){Object(ts["a"])("#vega",JSON.parse(this.vegaSpec),{actions:!1})}}},ss=es,is=Object(o["a"])(ss,Xe,Ze,!1,null,null,null),as=is.exports,ns={name:"ts-explore-session-chart",components:{TsVegaLiteChart:as},data:function(){return{processedSessions:[],message:"Show Session Chart",showChart:!1,showTimeRange:!1,selectedSessions:[],spec:"{}",sessionTypes:["all"],barSize:0,smallest_timestamp:0,selectedType:"",selectedID:"",sessions:[],startTimeRange:null,endTimeRange:null,timeRangeMessage:"",isTruncated:!1}},computed:{sketch:function(){return this.$store.state.sketch},indices:function(){return this.$store.state.currentQueryFilter.indices}},methods:{registerClickListener:function(t){var e=this.$store,s=this.sketch.id;t.addEventListener("click",function(t,i){var a=i.datum.session_type,n=i.datum.session_id;if(void 0!=a&&void 0!=n){var r="session_id."+a+":"+n;e.commit("updateCurrentQueryString",r),e.commit("search",s)}})},toggleChart:function(){var t=this;this.showChart=!this.showChart,this.showChart?(this.message="Hide Session Chart",0==this.sessions.length?g.getSessions(this.sketch.id,this.indices[0]).then(function(e){t.sessions=e.data,t.sessionTypes=t.sessionTypes.concat(Object(Ke["a"])(new Ge.a(t.sessions.map(function(t){return t.session_type})))),t.getVegaSpec()}).catch(function(t){}):this.getVegaSpec()):(this.message="Show Session Chart",this.selectedSessions=[],this.spec="{}",this.selectedType="",this.selectedID="",this.showTimeRange=!1,this.startTimeRange=Be()()-31556952e3,this.endTimeRange=Be()(),this.timeRangeMessage="")},toggleTimeRange:function(){this.showTimeRange=!this.showTimeRange},updateTimeRange:function(t){var e=/\d{1,2}\/\d{1,2}\/\d{4}/;e.test(t.target.value)?(this.timeRangeMessage="",this.selectedSessions=[],this.selectedType="",this.selectedID="","start_time_range_input"===t.target.name?this.startTimeRange=new Date(t.target.value).getTime():this.endTimeRange=new Date(t.target.value).getTime(),this.getVegaSpec()):this.timeRangeMessage="Please enter a valid date."},selectSessionType:function(t){var e=this;this.selectedID="";var s=JSON.parse(this.spec);"all"===this.selectedType?(this.selectedSessions=[],s["data"]["values"]=this.processedSessions):(this.selectedSessions=this.processedSessions.filter(function(t){return t["session_type"]===e.selectedType}),s["data"]["values"]=this.selectedSessions),s["vconcat"][1]["selection"]["brush"]["init"]["x"]=[this.smallest_timestamp,this.smallest_timestamp+50*this.barSize],this.spec=ze()(s)},selectSessionID:function(t){for(var e="",s=[],i=JSON.parse(ze()(this.selectedSessions)),a=0;a<i.length;a++){var n=i[a];this.selectedType===n.session_type&&this.selectedID===n.session_id?(n["selected"]=!0,e="session_id."+n["session_type"]+":"+n["session_id"],s=[n["start_timestamp"]-5*this.barSize,n["end_timestamp"]+5*this.barSize]):n["selected"]=!1}var r=JSON.parse(this.spec);r["data"]["values"]=i,r["vconcat"][1]["selection"]["brush"]["init"]["x"]=s,this.spec=ze()(r),this.$store.commit("updateCurrentQueryString",e),this.$store.commit("search",this.sketch.id)},getProcessedSessions:function(){var t=this,e=31556952e3,s=JSON.parse(ze()(this.sessions));if(this.isTruncated=s.pop()["truncated"],s.length>0){var i=s[0].end_timestamp,a=s[0].start_timestamp;if(null==this.endTimeRange){for(var n=1;n<s.length;n++)s[n].end_timestamp>i&&(i=s[n].end_timestamp);this.endTimeRange=i,this.startTimeRange=this.endTimeRange-e,s=s.filter(function(e){return e.start_timestamp>=t.startTimeRange&&e.start_timestamp<=t.endTimeRange}),a=s[0].start_timestamp;for(n=1;n<s.length;n++)s[n].start_timestamp<a&&(a=s[n].start_timestamp)}else{s=s.filter(function(e){return e.start_timestamp>=t.startTimeRange&&e.start_timestamp<=t.endTimeRange}),a=s[0].start_timestamp,i=s[0].end_timestamp;for(n=1;n<s.length;n++)s[n].start_timestamp<a&&(a=s[n].start_timestamp),s[n].end_timestamp>i&&(i=s[n].end_timestamp)}var r=i-a;this.barSize=Math.round(r/1e3),this.smallest_timestamp=a;for(n=0;n<s.length;n++){var c=s[n],o=c.start_timestamp+this.barSize;c.end_timestamp<o&&(c.end_timestamp=o)}}this.processedSessions=s},getVegaSpec:function(){var t=900,e=400;this.getProcessedSessions(),void 0!==this.processedSessions&&0!=this.processedSessions.length||(this.timeRangeMessage="There are no sessions in this time range.");var s={$schema:"https://vega.github.io/schema/vega-lite/v3.json",data:{values:this.processedSessions},vconcat:[{width:t,height:e,padding:5,mark:"bar",encoding:{y:{field:"session_type",type:"ordinal",axis:{title:"Session Type"}},x:{field:"start_timestamp",type:"temporal",timeUnit:"yearmonthdatehoursminutesseconds",axis:{title:"Timestamp",tickCount:5},scale:{domain:{selection:"brush"}}},x2:{field:"end_timestamp",type:"temporal",timeUnit:"yearmonthdatehoursminutesseconds",axis:{title:"End Timestamp"}},color:{field:"session_id",type:"nominal",scale:{scheme:"tableau20"},legend:!1},opacity:{condition:[{test:"datum.selected == true",value:1},{test:"datum.selected == false",value:.2}],value:.8}}},{width:t,height:e/4,padding:5,selection:{brush:{type:"interval",encodings:["x"],init:{x:[this.smallest_timestamp,this.smallest_timestamp+50*this.barSize]}}},mark:{type:"bar",x2Offset:t/100,clip:!0},encoding:{y:{field:"session_type",type:"ordinal",axis:{title:"Session Type"}},x:{field:"start_timestamp",type:"temporal",axis:{title:"Timestamp",tickCount:5}},x2:{field:"end_timestamp",type:"temporal",axis:{title:"End Timestamp"}},color:{field:"session_id",type:"nominal",scale:{scheme:"tableau20"},legend:!1},opacity:{condition:[{test:"datum.selected == true",value:1},{test:"datum.selected == false",value:.2}],value:.8}}}]};this.spec=ze()(s)}}},rs=ns,cs=Object(o["a"])(rs,Ye,He,!1,null,null,null),os=cs.exports,ls=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ts-sketch-explore-aggregator-list-dropdown",{on:{setActiveAggregator:t.updateAggregatorFormFields}}),s("br"),s("ts-dynamic-form",{key:t.selectedAggregator,ref:"vegaChart",attrs:{schema:t.schema},on:{formSubmitted:t.getVegaSpec},model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}}),s("br"),t.showChart?s("ts-vega-lite-chart",{attrs:{vegaSpec:t.vegaSpec}}):t._e()],1)},us=[],ds=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.schema.length?s("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._l(t.schema,function(e,i){return s(e.type,t._b({key:i,tag:"component",attrs:{value:t.formData[e.name]},on:{input:function(s){return t.updateForm(e.name,s)}}},"component",e,!1))}),t._m(0)],2):t._e()},ms=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"control"},[s("input",{staticClass:"button is-info",attrs:{type:"submit",value:"Run"}})])}],hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("input",{staticClass:"input",attrs:{type:"text",name:t.name,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])},vs=[],ps={name:"ts-dynamic-form-text-input",props:["placeholder","label","name","value"]},fs=ps,gs=Object(o["a"])(fs,hs,vs,!1,null,null,null),_s=gs.exports,Cs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),t._l(t.options,function(e){return s("option",{key:e},[t._v(t._s(e))])})],2)])])])},ks=[],bs={name:"ts-dynamic-form-radio-input",props:["options","label","value"]},ys=bs,ws=Object(o["a"])(ys,Cs,ks,!1,null,null,null),Ss=ws.exports,xs={name:"ts-dynamic-form",props:["schema","value"],components:{TsDynamicFormTextInput:_s,TsDynamicFormSelectInput:Ss},data:function(){return{formData:this.value||{}}},methods:{updateForm:function(t,e){this.$set(this.formData,t,e),this.$emit("input",this.formData)},submitForm:function(){this.$emit("formSubmitted")}}},$s=xs,Ts=Object(o["a"])($s,ds,ms,!1,null,null,null),Es=Ts.exports,Ds=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Choose an aggregator")]),s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selected=e.target.multiple?s:s[0]},function(e){return t.setActiveAggregator()}]}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),t._l(t.meta.aggregators,function(e,i){return s("option",{key:e.id},[t._v("\n          "+t._s(i)+"\n        ")])})],2)])])])},Ms=[],Fs={name:"ts-sketch-explore-aggregator-list-dropdown",props:["isRounded","title"],data:function(){return{selected:"",selectedChart:""}},methods:{setActiveAggregator:function(){var t=JSON.parse(ze()(this.meta.aggregators[this.selected]));t.name=this.selected,this.$emit("setActiveAggregator",t)}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}}},As=Fs,Is=Object(o["a"])(As,Ds,Ms,!1,null,"1cb6856c",null),Ns=Is.exports,Os={name:"ts-sketch-explore-aggregation",components:{TsDynamicForm:Es,TsVegaLiteChart:as,TsSketchExploreAggregatorListDropdown:Ns},data:function(){return{schema:{},formData:{},vegaSpec:{},selectedAggregator:"",showChart:!1}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}},methods:{updateAggregatorFormFields:function(t){this.showChart=!1;var e={};this.schema=t.form_fields,this.schema.forEach(function(t){e[t.name]=t.default_value}),this.formData=e,this.selectedAggregator=t.name},getVegaSpec:function(){var t=this;this.showChart=!0;var e={aggregator_name:this.selectedAggregator,aggregator_parameters:this.formData};g.runAggregator(this.sketch.id,e).then(function(e){var s=e.data.meta.vega_spec;s.config.view.width=t.$refs.vegaChart.$el.offsetWidth,s.config.autosize={type:"fit",contains:"padding"},t.vegaSpec=ze()(s)}).catch(function(t){})}}},Ps=Os,Ls=Object(o["a"])(Ps,ls,us,!1,null,null,null),js=Ls.exports,Qs={name:"ts-sketch-explore-search",components:{TsSketchExploreAggregation:js,TsViewListDropdown:ae,TsCreateViewForm:ue,TsSketchExploreEventList:Me,TsExploreTimelinePicker:Pe,TsExploreFilterTime:qe,TsExploreSessionChart:os},props:["sketchId"],data:function(){return{params:{},showCreateViewModal:!1,showFilters:!1,showAggregations:!1}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},eventList:function(){return this.$store.state.eventList},totalHits:function(){return this.eventList.meta.es_total_count||0},totalTime:function(){return this.eventList.meta.es_time/1e3||0},searchInProgress:{get:function(){return this.$store.state.searchInProgress},set:function(t){this.$store.commit("updateSearchInProgress",t)}},currentQueryString:{get:function(){return this.$store.state.currentQueryString},set:function(t){this.$store.commit("updateCurrentQueryString",t)}},currentQueryFilter:{get:function(){return this.$store.state.currentQueryFilter},set:function(t){this.$store.commit("updateCurrentQueryFilter",t)}}},methods:{search:function(){this.$store.commit("search",this.sketchId)},searchView:function(t){var e=this;t!==Xt()(t,10)&&"string"!==typeof t&&(t=t.id,this.$router.push({name:"SketchExplore",query:{view:t}})),g.getView(this.sketchId,t).then(function(t){var s=t.data.objects[0];e.currentQueryString=s.query_string,e.currentQueryFilter=JSON.parse(s.query_filter),e.search()}).catch(function(t){})},toggleCreateViewModal:function(){this.showCreateViewModal=!this.showCreateViewModal}},created:function(){var t=!1;this.params={viewId:this.$route.query.view,indexName:this.$route.query.index,resultLimit:this.$route.query.limit,queryString:this.$route.query.q},this.params.viewId&&this.searchView(this.params.viewId),this.params.queryString&&(this.currentQueryString=this.params.queryString,t=!0),this.params.indexName&&(this.params.queryString||(this.currentQueryString="*"),this.currentQueryFilter.indices=[this.params.indexName],t=!0),t&&this.search()}},Vs=Qs,Rs=(s("8c2b"),Object(o["a"])(Vs,Wt,Gt,!1,null,null,null)),qs=Rs.exports,Ys=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view")},Hs=[],Us={name:"ts-sketch-story"},zs=Us,Js=Object(o["a"])(zs,Ys,Hs,!1,null,null,null),Bs=Js.exports,Ws=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("ts-navbar-secondary",{attrs:{currentAppContext:"sketch",currentPage:"stories"}},[t.sketch.stories.length?s("a",{staticClass:"button is-success is-rounded",staticStyle:{"margin-right":"7px"},on:{click:function(e){t.showCreateStoryModal=!t.showCreateStoryModal}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-plus"})]),s("span",[t._v("Story")])]):t._e()])],1)]),s("div",{staticClass:"modal",class:{"is-active":t.showCreateStoryModal}},[t._v(">\n    "),s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("ts-sketch-story-create-form",{on:{toggleModal:function(e){t.showCreateStoryModal=!t.showCreateStoryModal}}})],1)])])]),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.showCreateStoryModal=!t.showCreateStoryModal}}})]),s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[t.sketch.stories.length?t._e():s("div",[t._v("\n            There are no stories in this sketch yet.\n            "),s("br"),s("br"),s("a",{staticClass:"button is-success is-rounded",staticStyle:{"margin-right":"7px"},on:{click:function(e){t.showCreateStoryModal=!t.showCreateStoryModal}}},[t._m(1),s("span",[t._v("Create a new story")])])]),s("ts-sketch-story-list")],1)])])])])},Gs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Create a new story")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-plus"})])}],Ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Title")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",attrs:{type:"text",required:"",placeholder:"Title of your story",autofocus:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),t._m(0)])},Xs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{staticClass:"button is-success",attrs:{type:"submit",value:"Create"}})])])}],Zs={name:"ts-home-sketch-create-form",data:function(){return{title:""}},methods:{clearFormData:function(){this.title=""},submitForm:function(){var t=this,e="";g.createStory(this.title,e,this.sketch.id).then(function(e){var s=e.data.objects[0].id;t.clearFormData(),t.$store.commit("updateSketch",t.sketch.id),t.$router.push({name:"SketchStoryContent",params:{storyId:s}})}).catch(function(t){})}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}}},ti=Zs,ei=Object(o["a"])(ti,Ks,Xs,!1,null,"0724cb54",null),si=ei.exports,ii={name:"ts-sketch-story",components:{TsSketchStoryList:$t,TsSketchStoryCreateForm:si},data:function(){return{showCreateStoryModal:!1}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}}},ai=ii,ni=Object(o["a"])(ai,Ws,Gs,!1,null,null,null),ri=ni.exports,ci=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("ts-navbar-secondary",{attrs:{currentAppContext:"sketch",currentPage:"stories"}})],1)]),t.blocks?s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content",staticStyle:{padding:"50px"}},[s("div",{staticClass:"markdown-body",staticStyle:{"margin-bottom":"20px","padding-left":"10px"}},[s("h1",[t._v(t._s(t.title))])]),t._l(t.blocks,function(e,i){return s("div",{key:i},[e.componentName?t._e():s("div",{staticClass:"inactiveBlock",class:{activeBlock:e.isActive},staticStyle:{"padding-left":"10px"},on:{mouseover:function(t){e.isActive=!0},mouseleave:function(t){e.isActive=!1}}},[e.isActive?s("span",{staticStyle:{float:"right"}},[s("button",{staticClass:"delete",on:{click:function(e){return t.deleteBlock(i)}}})]):t._e(),e.edit?s("div",{staticClass:"columns",staticStyle:{"margin-bottom":"0"}},[s("div",{staticClass:"column"},[s("textarea",{staticClass:"textarea",staticStyle:{height:"100%"},attrs:{placeholder:"Your story starts here.."},domProps:{value:e.content},on:{input:function(s){return t.update(s,e)}}})]),s("transition",{attrs:{name:"fade"}},[e.content?s("div",{staticClass:"column"},[s("div",{staticClass:"markdown-body",staticStyle:{"max-height":"600px",overflow:"auto"},domProps:{innerHTML:t._s(e.html)}})]):t._e()])],1):t._e(),e.edit?s("div",{staticClass:"field is-grouped"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-rounded is-success",attrs:{disabled:!e.content},on:{click:function(s){return t.saveAndHide(e)}}},[t._m(0,!0),s("span",[t._v("Save")])])])]):t._e(),e.edit?t._e():s("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(e.html)},on:{dblclick:function(t){e.edit=!e.edit}}})]),e.componentName?s("div",{on:{mouseover:function(t){e.isActive=!0},mouseleave:function(t){e.isActive=!1}}},[s("article",{staticClass:"message"},[s("div",{staticClass:"message-header"},[s("p",[s("router-link",{attrs:{to:{name:"SketchExplore",query:{view:e.componentProps.view.id}}}},[s("strong",[t._v(t._s(e.componentProps.view.name))])])],1),s("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:function(e){return t.deleteBlock(i)}}})]),s("div",{staticClass:"message-body"},[s(e.componentName,t._b({tag:"component"},"component",e.componentProps,!1))],1)])]):t._e(),s("div",{staticStyle:{"min-height":"35px","margin-top":"10px","margin-bottom":"10px"},on:{mouseover:function(t){e.showPanel=!0},mouseleave:function(t){e.showPanel=!1}}},[i===t.blocks.length-1?s("div",{staticStyle:{"padding-top":"20px"}}):t._e(),i===t.blocks.length-1||e.showPanel||e.isActive?s("div",{staticClass:"field is-grouped"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-rounded",on:{click:function(e){return t.addBlock(i)}}},[t._v("\n                      + Text\n                    ")])]),t.meta.views.length?s("p",{staticClass:"control"},[s("ts-view-list-dropdown",{attrs:{"is-rounded":!0,title:"+ Saved view"},on:{setActiveView:function(e){return t.addViewComponent(e,i)}}})],1):t._e()]):t._e()])])})],2)])])]):t._e()])},oi=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-save",attrs:{"aria-hidden":"true"}})])}],li=s("0e54"),ui=s.n(li),di=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.eventList.objects,function(t){return s("ts-sketch-explore-event-list-item",{key:t._id,attrs:{event:t}})}),1)},mi=[],hi={name:"ts-sketch-explore-view-event-list",components:{TsSketchExploreEventListItem:$e},props:["view"],data:function(){return{queryString:"",queryFilter:{},eventList:[]}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}},methods:{search:function(){var t=this,e={query:this.queryString,filter:this.queryFilter};g.search(this.sketch.id,e).then(function(e){t.eventList=e.data}).catch(function(t){})},searchView:function(t){var e=this;g.getView(this.sketch.id,t).then(function(t){var s=t.data.objects[0];e.queryString=s.query_string,e.queryFilter=JSON.parse(s.query_filter),e.search()}).catch(function(t){})}},created:function(){this.searchView(this.view.id)}},vi=hi,pi=Object(o["a"])(vi,di,mi,!1,null,null,null),fi=pi.exports,gi=function(){return{componentName:"",componentProps:{},content:"",html:"",edit:!0,showPanel:!1,isActive:!1}},_i={name:"ts-sketch-story",props:["sketchId","storyId"],components:{TsViewListDropdown:ae,TsViewEventList:fi},data:function(){return{blocks:[],title:""}},methods:{update:rt.a.debounce(function(t,e){e.content=t.target.value,e.html=ui()(t.target.value,{sanitize:!1}),this.save()},300),addBlock:function(t){var e=t+1,s=gi();this.blocks.splice(e,0,s)},deleteBlock:function(t){this.blocks.splice(t,1),this.blocks.length||(this.blocks=[gi()]),this.save()},addViewComponent:function(t,e){var s=e+1,i=gi();i.componentName="TsViewEventList",i.componentProps={view:t},this.blocks.splice(s,0,i),this.save()},hideBlock:function(t){t.edit=!t.edit},saveAndHide:function(t){this.hideBlock(t),this.save()},save:function(){this.blocks.forEach(function(t){t.showPanel=!1,t.isActive=!1});var t=ze()(this.blocks);g.updateStory(this.title,t,this.sketchId,this.storyId).then(function(t){}).catch(function(t){})}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}},created:function(){var t=this;g.getStory(this.sketchId,this.storyId).then(function(e){t.title=e.data.objects[0].title;var s=e.data.objects[0].content;t.blocks=""===s?[gi()]:JSON.parse(s)}).catch(function(t){console.error(t)})}},Ci=_i,ki=(s("4e2e"),Object(o["a"])(Ci,ci,oi,!1,null,null,null)),bi=ki.exports,yi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container is-fluid"},[s("ts-navbar-secondary",{attrs:{currentAppContext:"sketch",currentPage:""}})],1)]),s("ts-sketch-timelines-manage")],1)},wi=[],Si={name:"ts-sketch-timelines",components:{TsSketchTimelinesManage:jt}},xi=Si,$i=Object(o["a"])(xi,yi,wi,!1,null,null,null),Ti=$i.exports,Ei=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("ts-navbar-secondary",{attrs:{currentAppContext:"sketch",currentPage:""}})],1)]),s("ts-sketch-views-manage")],1)},Di=[],Mi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"card",staticStyle:{"min-height":"160px"}},[t._m(0),s("div",{staticClass:"card-content"},[s("ts-saved-view-list",{attrs:{views:t.meta.views,controls:!0}})],1)])])])},Fi=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Manage Saved Views")])])}],Ai={name:"ts-sketch-views-manage",components:{TsSavedViewList:kt},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}}},Ii=Ai,Ni=Object(o["a"])(Ii,Mi,Fi,!1,null,null,null),Oi=Ni.exports,Pi={name:"ts-sketch-views",components:{TsSketchViewsManage:Oi}},Li=Pi,ji=Object(o["a"])(Li,Ei,Di,!1,null,null,null),Qi=ji.exports;i["a"].use(d["a"]);var Vi=[{name:"Home",path:"/",component:I},{path:"/sketch/:sketchId",component:Q,props:!0,children:[{path:"",name:"SketchOverview",component:qt},{path:"explore",component:Bt,props:!0,children:[{path:"",name:"SketchExplore",component:qs,props:!0}]},{path:"timelines",name:"SketchTimelines",component:Ti,props:!0},{path:"views",name:"SketchViews",component:Qi,props:!0},{path:"story",component:Bs,props:!0,children:[{path:"",name:"SketchStory",component:ri},{path:":storyId",name:"SketchStoryContent",component:bi,props:!0}]}]}],Ri=new d["a"]({mode:"history",routes:Vi}),qi=s("5176"),Yi=s.n(qi),Hi=s("2f62");i["a"].use(Hi["a"]);var Ui=function(){return{sketch:{},meta:{},count:0,eventList:{meta:{},objects:[]},searchInProgress:!1,currentQueryString:"",currentQueryFilter:{from:0,time_end:null,terminate_after:40,exclude:[],indices:["_all"],time_start:null,order:"asc",size:"40"}}},zi=Ui(),Ji=new Hi["a"].Store({state:zi,mutations:{updateSketch:function(t,e){g.getSketch(e).then(function(e){i["a"].set(t,"sketch",e.data.objects[0]),i["a"].set(t,"meta",e.data.meta)}).catch(function(t){}),g.countSketchEvents(e).then(function(e){i["a"].set(t,"count",e.data.meta.count)}).catch(function(t){})},search:function(t,e){i["a"].set(t,"searchInProgress",!0);var s={query:this.state.currentQueryString,filter:this.state.currentQueryFilter};g.search(e,s).then(function(e){i["a"].set(t,"eventList",e.data),i["a"].set(t,"searchInProgress",!1)}).catch(function(t){})},updateEventList:function(t,e){i["a"].set(t,"eventList",e)},updateCurrentQueryString:function(t,e){i["a"].set(t,"currentQueryString",e)},updateCurrentQueryFilter:function(t,e){i["a"].set(t,"currentQueryFilter",e)},updateSearchInProgress:function(t,e){i["a"].set(t,"searchInProgress",e)},resetState:function(t){Yi()(t,Ui())}},actions:{updateSketch:function(t,e){t.commit("updateSketch",e)},updateEventList:function(t,e){t.commit("updateEventList",e)},resetState:function(t){t.commit("resetState")}}});s("b383"),s("2d27"),s("56eb"),i["a"].use(s("2ead")),i["a"].config.productionTip=!1,new i["a"]({router:Ri,store:Ji,render:function(t){return t(u)}}).$mount("#app")},"56eb":function(t,e,s){"use strict";s.r(e);s("7f7f"),s("ac6a");var i=s("2b0e"),a=s("6dde");a.keys().forEach(function(t){var e=a(t);i["a"].filter(e.default.name,e.default.filter)})},"6dde":function(t,e,s){var i={"./CompactNumber.js":"d3b7"};function a(t){var e=n(t);return s(e)}function n(t){var e=i[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}a.keys=function(){return Object.keys(i)},a.resolve=n,t.exports=a,a.id="6dde"},"75a6":function(t,e,s){var i={"./AppNavbarMain.vue":"f7e3","./AppNavbarSecondary.vue":"c5cc"};function a(t){var e=n(t);return s(e)}function n(t){var e=i[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}a.keys=function(){return Object.keys(i)},a.resolve=n,t.exports=a,a.id="75a6"},"7a96":function(t,e,s){},"8c2b":function(t,e,s){"use strict";var i=s("b290"),a=s.n(i);a.a},9681:function(t,e,s){"use strict";var i=s("b553"),a=s.n(i);a.a},9719:function(t,e,s){},b290:function(t,e,s){},b383:function(t,e,s){},b553:function(t,e,s){},b6e3:function(t,e,s){},b73f:function(t,e,s){},c21b:function(t,e,s){"use strict";var i=s("03e4"),a=s.n(i);a.a},c5cc:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},["sketch"===t.currentAppContext?s("div",{staticClass:"navbar-item"},[s("div",{staticClass:"tabs is-left"},[s("ul",[s("li",{class:{"is-active":"overview"===t.currentPage}},[s("router-link",{attrs:{to:{name:"SketchOverview"}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-cubes",attrs:{"aria-hidden":"true"}})]),s("span",[t._v("Overview")])])],1),s("li",{class:{"is-active":"explore"===t.currentPage}},[s("router-link",{attrs:{to:{name:"SketchExplore"}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),s("span",[t._v("Explore")])])],1),s("li",{class:{"is-active":"stories"===t.currentPage}},[s("router-link",{attrs:{to:{name:"SketchStory"}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-book",attrs:{"aria-hidden":"true"}})]),s("span",[t._v("Stories")])])],1)])])]):t._e(),"explore"===t.currentAppContext?s("div",{staticClass:"navbar-item"},[s("div",{staticClass:"tabs"},[s("ul",[s("li",{class:{"is-active":"search"===t.currentPage}},[s("router-link",{attrs:{to:{name:"SketchExplore"}}},[s("span",[t._v("Search")])])],1),s("li",{class:{"is-active":"aggregation"===t.currentPage}},[s("router-link",{attrs:{to:{name:"SketchExploreAggregation"}}},[s("span",[t._v("Aggregations")])])],1)])])]):t._e(),s("div",{staticClass:"navbar-end"},[s("div",{staticClass:"navbar-item"},[t._t("default")],2)])])},a=[],n={name:"ts-navbar-secondary",props:["currentAppContext","currentPage"]},r=n,c=(s("50fe"),s("2877")),o=Object(c["a"])(r,i,a,!1,null,"54031a92",null);e["default"]=o.exports},d316:function(t,e,s){},d3b7:function(t,e,s){"use strict";s.r(e),e["default"]={name:"compactNumber",filter:function(t){t||(t=0);var e="";if(t>999999999)t=Math.round(t/1e9*10)/10,e="B";else if(t>999999)t=Math.round(t/1e6*10)/10,e="M";else{if(!(t>999))return t;t=Math.round(t/1e3*10)/10,e="K"}return t+e}}},d844:function(t,e,s){},f7e3:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[s("div",{staticClass:"navbar-brand"},[s("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[s("div",{staticClass:"logo",staticStyle:{"margin-top":"7px"}},[s("img",{attrs:{src:"/dist/timesketch-white.png"}})]),s("span",{staticStyle:{color:"#fff","margin-left":"7px","margin-top":"1px","font-size":"1.2em"}},[t._v("time"),s("b",[t._v("sketch")])])])],1),t._m(0)])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar-end"},[s("div",{staticClass:"navbar-item"},[s("a",{staticStyle:{color:"#fff"},attrs:{href:"/logout"}},[t._v("Logout")])])])}],n={name:"ts-navbar-main"},r=n,c=(s("9681"),s("2877")),o=Object(c["a"])(r,i,a,!1,null,"5d90545c",null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-common.1a1be507.js.map