(function(t){function e(e){for(var a,c,r=e[0],o=e[1],l=e[2],d=0,v=[];d<r.length;d++)c=r[d],n[c]&&v.push(n[c][0]),n[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(e);while(v.length)v.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var o=s[r];0!==n[o]&&(a=!1)}a&&(i.splice(e--,1),t=c(c.s=s[0]))}return t}var a={},n={app:0},i=[];function c(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=t,c.c=a,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(s,a,function(e){return t[e]}.bind(null,a));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=o;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"02fb":function(t,e,s){"use strict";var a=s("3af4"),n=s.n(a);n.a},"048e":function(t,e,s){"use strict";var a=s("99c7"),n=s.n(a);n.a},"13b2":function(t,e,s){"use strict";var a=s("217b"),n=s.n(a);n.a},"217b":function(t,e,s){},"21f8":function(t,e,s){"use strict";var a=s("7796"),n=s.n(a);n.a},"2d27":function(t,e,s){"use strict";s.r(e);s("7f7f"),s("ac6a");var a=s("2b0e"),n=s("75a6");n.keys().forEach(function(t){var e=n(t),s=e.default.name;a["a"].component(s,e.default||e)})},"3af4":function(t,e,s){},"45dd":function(t,e,s){"use strict";var a=s("b73f"),n=s.n(a);n.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("ts-navbar-main"),s("router-view")],1)},i=[],c={name:"app"},r=c,o=s("2877"),l=Object(o["a"])(r,n,i,!1,null,null,null),u=l.exports,d=s("8c4f"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container",class:{"is-fluid":t.fluid}},[s("ts-navbar-secondary",[s("button",{staticClass:"button is-success is-rounded",on:{click:function(e){t.showModal=!t.showModal}}},[s("strong",[t._v("+ Sketch")])])])],1)]),s("div",{staticClass:"modal",class:{"is-active":t.showModal}},[t._v(">\n    "),s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Name")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"input",attrs:{type:"text",required:"",placeholder:"Name your sketch"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("Description (optional)")]),s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"textarea",attrs:{placeholder:"Describe your sketch"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-success",attrs:{type:"submit"},on:{click:t.submitForm}},[t._v("Save")])])])])])])])]),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.showModal=!t.showModal}}})]),s("div",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("div",[s("ts-sketch-list")],1)])])])])])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Create new sketch")])])}],p=(s("7f7f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"content-list"},t._l(t.sketches,function(e){return s("li",{key:e.id,staticStyle:{padding:"15px"}},[s("div",{staticClass:"is-pulled-right",staticStyle:{"margin-top":"10px"}},[s("span",{staticClass:"is-size-7"},[t._v(t._s(e.user.username))])]),s("div",[s("router-link",{attrs:{to:{name:"SketchOverview",params:{sketchId:e.id}}}},[s("strong",[t._v(t._s(e.name))])]),s("br"),s("span",{staticClass:"is-size-7"},[t._v("Last activity "+t._s(e.updated_at))])],1)])}),0)])}),m=[],h=s("bc3a"),C=s.n(h),b=C.a.create({baseURL:"/api/v1",headers:{common:{"X-CSRFToken":document.getElementsByTagName("meta")[0]["content"]}}}),_={getSketchList:function(){return b.get("/sketches/")},getSketch:function(t){return b.get("/sketches/"+t+"/")},createSketch:function(t){return b.post("/sketches/",t)},countSketchEvents:function(t){return b.get("/sketches/"+t+"/count/")}},k={name:"ts-sketch-list",data:function(){return{sketches:[]}},created:function(){var t=this;_.getSketchList().then(function(e){t.$store.dispatch("resetState"),t.sketches=e.data.objects[0]}).catch(function(t){console.error(t)})}},g=k,w=(s("13b2"),Object(o["a"])(g,p,m,!1,null,"f7b9f26c",null)),y=w.exports,x={name:"app",components:{TsSketchList:y},data:function(){return{showModal:!1,form:{name:"",description:""},fluid:!1}},methods:{cleanFormData:function(){this.form.name="",this.form.description=""},submitForm:function(){var t=this,e={name:this.form.name,description:this.form.description};_.createSketch(e).then(function(e){var s=e.data.objects[0].id;t.cleanFormData(),t.$router.push({name:"overview",params:{sketchId:s}})}).catch(function(t){})}}},S=x,O=Object(o["a"])(S,v,f,!1,null,null,null),E=O.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view")},j=[],M={name:"app",props:["sketchId"],created:function(){this.$store.dispatch("updateSketch",this.sketchId).then(function(t){}).catch(function(t){console.log("error: ",t)})}},D=M,T=Object(o["a"])(D,$,j,!1,null,null,null),N=T.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("ts-navbar-secondary",{attrs:{currentAppContext:"sketch",currentPage:"overview"}},[s("a",{staticClass:"button is-success is-rounded",staticStyle:{"margin-right":"7px"},on:{click:function(e){t.showModal=!t.showModal}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-plus"})]),s("span",[t._v("Timeline")])]),s("a",{staticClass:"button is-link is-rounded",staticStyle:{"margin-right":"10px"}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-users"})]),s("span",[t._v("Share")])]),s("div",{staticClass:"dropdown is-hoverable is-right",class:{"is-active":t.settingsDropdownActive}},[s("div",{staticClass:"dropdown-trigger"},[s("a",{staticClass:"button",staticStyle:{background:"transparent",border:"none"},attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(e){t.settingsDropdownActive=!t.settingsDropdownActive}}},[s("span",[t._v("More")]),s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])])]),s("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[s("div",{staticClass:"dropdown-content"},[s("a",{staticClass:"dropdown-item"},[s("span",{staticClass:"icon is-small",staticStyle:{"margin-right":"5px"}},[s("i",{staticClass:"fas fa-trash"})]),s("span",[t._v("Delete")])]),s("hr",{staticClass:"dropdown-divider"}),s("a",{staticClass:"dropdown-item"},[s("span",{staticClass:"icon is-small",staticStyle:{"margin-right":"5px"}},[s("i",{staticClass:"fas fa-edit"})]),s("span",[t._v("Edit")])])])])])])],1)]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"card",staticStyle:{"min-height":"200px"}},[s("div",{staticClass:"card-content"},[s("ts-sketch-summary",{attrs:{sketch:t.sketch}})],1)])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"card",staticStyle:{"min-height":"100px"}},[s("div",{staticClass:"card-content"},[s("ts-sketch-metrics",{attrs:{timelines:t.sketch.active_timelines,views:t.meta.views,count:t.count}})],1)])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"card has-min-height"},[t._m(0),s("div",{staticClass:"card-content",staticStyle:{padding:"5px"}},[s("ts-timeline-list",{attrs:{timelines:t.sketch.timelines}})],1)])]),s("div",{staticClass:"column"},[s("div",{staticClass:"card has-min-height"},[t._m(1),s("div",{staticClass:"card-content",staticStyle:{padding:"10px"}},[s("ts-saved-view-list",{attrs:{views:t.meta.views}})],1)])])])])])])},A=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Timelines")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Views")])])}],L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"title is-4"},[t._v(t._s(t.sketch.name))]),s("p",[t._v(t._s(t.sketch.description))])])},F=[],I={name:"ts-sketch-summary",props:["sketch"]},U=I,Y=Object(o["a"])(U,L,F,!1,null,"6e2cd70e",null),z=Y.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"level"},[s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[t._v("Timelines")]),s("p",{staticClass:"title"},[t._v(t._s(t.timelines&&t.timelines.length?t.timelines.length:0))])])]),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[t._v("Views")]),s("p",{staticClass:"title"},[t._v(t._s(t.views&&t.views.length?t.views.length:0))])])]),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[t._v("Events")]),s("p",{staticClass:"title"},[t._v(t._s(t._f("compactNumber")(t.count)))])])])])},V=[],B={name:"ts-sketch-metrics",props:["timelines","views","count"]},J=B,R=Object(o["a"])(J,H,V,!1,null,"489a9690",null),q=R.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"content-list"},t._l(t.timelines,function(e){return s("li",{key:e.id,staticStyle:{padding:"10px"}},[s("div",[s("div",{staticClass:"ts-timeline-color-box is-pulled-left",style:{"background-color":"#"+e.color}}),s("strong",[t._v(t._s(e.name))]),s("br"),s("span",{staticClass:"is-size-7"},[t._v("\n          Added "+t._s(t._f("moment")(e.updated_at,"YYYY-MM-DD HH:mm"))+"\n        ")])])])}),0)])},W=[],X={name:"ts-timeline-list",props:["timelines"]},G=X,Q=(s("048e"),Object(o["a"])(G,K,W,!1,null,"12f6abbf",null)),Z=Q.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"content-list"},t._l(t.views,function(e){return s("li",{key:e.id,staticStyle:{padding:"5px"}},[t._v("\n        "+t._s(e.name)+"\n    ")])}),0)])},et=[],st={name:"ts-view-list",props:["views"]},at=st,nt=Object(o["a"])(at,tt,et,!1,null,"3786fac2",null),it=nt.exports,ct={name:"app",components:{TsSketchMetrics:q,TsSketchSummary:z,TsTimelineList:Z,TsSavedViewList:it},data:function(){return{settingsDropdownActive:!1}},computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta},count:function(){return this.$store.state.count}}},rt=ct,ot=(s("45dd"),Object(o["a"])(rt,P,A,!1,null,null,null)),lt=ot.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("ts-navbar-secondary",{attrs:{currentAppContext:"sketch",currentPage:"explore"}})],1)]),t._m(0)])},dt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("span",[t._v("Work in progress..")])])])])])}],vt={name:"app",components:{},props:["sketchId"],computed:{sketch:function(){return this.$store.state.sketch},meta:function(){return this.$store.state.meta}}},ft=vt,pt=Object(o["a"])(ft,ut,dt,!1,null,null,null),mt=pt.exports;a["a"].use(d["a"]);var ht=[{name:"Home",path:"/",component:E},{path:"/sketch/:sketchId",component:N,props:!0,children:[{path:"",name:"SketchOverview",component:lt},{path:"explore",name:"SketchExplore",component:mt}]}],Ct=new d["a"]({mode:"history",routes:ht}),bt=s("5176"),_t=s.n(bt),kt=s("2f62");a["a"].use(kt["a"]);var gt=function(){return{sketch:{},meta:{},count:0}},wt=gt(),yt=new kt["a"].Store({state:wt,mutations:{updateSketch:function(t,e){_.getSketch(e).then(function(e){a["a"].set(t,"sketch",e.data.objects[0]),a["a"].set(t,"meta",e.data.meta)}).catch(function(t){}),_.countSketchEvents(e).then(function(e){a["a"].set(t,"count",e.data.meta.count)}).catch(function(t){})},resetState:function(t){_t()(t,gt())}},actions:{updateSketch:function(t,e){t.commit("updateSketch",e)},resetState:function(t){t.commit("resetState")}}});s("b383"),s("2d27"),s("56eb"),a["a"].use(s("2ead")),a["a"].config.productionTip=!1,new a["a"]({router:Ct,store:yt,render:function(t){return t(u)}}).$mount("#app")},"56eb":function(t,e,s){"use strict";s.r(e);s("7f7f"),s("ac6a");var a=s("2b0e"),n=s("6dde");n.keys().forEach(function(t){var e=n(t);a["a"].filter(e.default.name,e.default.filter)})},"6dde":function(t,e,s){var a={"./CompactNumber.js":"d3b7"};function n(t){var e=i(t);return s(e)}function i(t){var e=a[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="6dde"},"75a6":function(t,e,s){var a={"./AppNavbarMain.vue":"f7e3","./AppNavbarSecondary.vue":"c5cc"};function n(t){var e=i(t);return s(e)}function i(t){var e=a[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="75a6"},7796:function(t,e,s){},"99c7":function(t,e,s){},b383:function(t,e,s){},b73f:function(t,e,s){},c5cc:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},["sketch"===t.currentAppContext?s("div",{staticClass:"navbar-item"},[s("div",{staticClass:"tabs is-left"},[s("ul",[s("li",{class:{"is-active":"overview"===t.currentPage}},[s("router-link",{attrs:{to:{name:"SketchOverview"}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-cubes",attrs:{"aria-hidden":"true"}})]),s("span",[t._v("Overview")])])],1),s("li",{class:{"is-active":"explore"===t.currentPage}},[s("router-link",{attrs:{to:{name:"SketchExplore"}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),s("span",[t._v("Explore")])])],1),s("li",{class:{"is-active":"stories"===t.currentPage}},[t._m(0)])])])]):t._e(),s("div",{staticClass:"navbar-end"},[s("div",{staticClass:"navbar-item"},[t._t("default")],2)])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-book",attrs:{"aria-hidden":"true"}})]),s("span",[t._v("Stories")])])}],i={name:"ts-navbar-secondary",props:["currentAppContext","currentPage"]},c=i,r=(s("21f8"),s("2877")),o=Object(r["a"])(c,a,n,!1,null,"1655e4ad",null);e["default"]=o.exports},d3b7:function(t,e,s){"use strict";s.r(e),e["default"]={name:"compactNumber",filter:function(t){t||(t=0);var e="";if(t>999999999)t=Math.round(t/1e9*10)/10,e="B";else if(t>999999)t=Math.round(t/1e6*10)/10,e="M";else{if(!(t>999))return t;t=Math.round(t/1e3*10)/10,e="K"}return t+e}}},f7e3:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[s("div",{staticClass:"navbar-brand"},[s("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:"/dist/timesketch-logo-white.svg"}})])])],1),t._m(0)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar-end"},[t._v("+\n    "),s("div",{staticClass:"navbar-item"})])}],i={name:"ts-navbar-main"},c=i,r=(s("02fb"),s("2877")),o=Object(r["a"])(c,a,n,!1,null,"23dfe699",null);e["default"]=o.exports}});
//# sourceMappingURL=app.9a4044cd.js.map