{{- if and (.Values.ingress.enabled) (eq .Values.ingress.className "gce") }}
apiVersion: networking.gke.io/v1
kind: ManagedCertificate
metadata:
  name: {{ include "timesketch.fullname" . }}-managed-ssl
  namespace: {{ .Release.Namespace | quote }}
spec:
  domains: 
    - {{ required "A valid .Values.ingress.domain entry is required!" .Values.ingress.domain }}
{{- end }}